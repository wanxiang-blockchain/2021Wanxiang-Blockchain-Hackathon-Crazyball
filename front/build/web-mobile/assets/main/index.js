window.__require=function t(e,o,n){function i(a,c){if(!o[a]){if(!e[a]){var s=a.split("/");if(s=s[s.length-1],!e[s]){var l="function"==typeof __require&&__require;if(!c&&l)return l(s,!0);if(r)return r(s,!0);throw new Error("Cannot find module '"+a+"'")}a=s}var u=o[a]={exports:{}};e[a][0].call(u.exports,function(t){return i(e[a][1][t]||t)},u,u.exports,t,e,o,n)}return o[a].exports}for(var r="function"==typeof __require&&__require,a=0;a<n.length;a++)i(n[a]);return i}({AudioPlayer:[function(t,e,o){"use strict";cc._RF.push(e,"6ded9VqaA5MjZErune4OGJZ","AudioPlayer");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.AUDIO_CONFIG=o.AudioPlayer=void 0;var r,a=t("../loader/loader_mgr"),c=t("../util"),s=t("../base/SingletonClass"),l=t("../localStorage/LocalStorage"),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.clip_cache=new Map,e.loading_map=new Map,e.music_id=-1,e.music_volume=.5,e.music_mute=!1,e.sound_ids=[],e.sound_volume=1,e.sound_mute=!1,e}return i(e,t),e.ins=function(){return t.ins.call(this)},e.prototype.flush=function(){},e.prototype.play_music=function(t){this.music_id>=0&&this.stop_music();var e=c.strfmt("sound/{0}",t);if(this.curr_music=t,!this.music_mute){var o=this.clip_cache.get(e);if(o)this.play_clip(o,this.music_volume,!0,r.Music);else{var n={type:r.Music,name:t,path:e,volume:this.music_volume,loop:!0};this.load_task(n)}}},e.prototype.stop_music=function(){this.music_id<0||(cc.audioEngine.stop(this.music_id),this.music_id=-1)},e.prototype.get_music_mute=function(){return this.music_mute},e.prototype.set_music_mute=function(t){this.music_mute=t,l.LocalStorage.ins().setLocal(l.CONST_STORAGE_KEY.KEY_MUSIC_IS_MUTE,t),this.music_id<0?!t&&this.curr_music&&this.play_music(this.curr_music):t?cc.audioEngine.pause(this.music_id):cc.audioEngine.resume(this.music_id)},e.prototype.set_music_volume=function(t){this.music_volume=t,this.music_id>=0&&cc.audioEngine.setVolume(this.music_id,t),l.LocalStorage.ins().setLocal(l.CONST_STORAGE_KEY.KEY_MUSIC_VOLUME,t)},e.prototype.load_task=function(t){var e=t.path;this.loading_map.get(e)||(this.loading_map.set(e,!0),a.loader_mgr.get_inst().loadRawAsset(e,c.gen_handler(this.on_clip_loaded,this,t)))},e.prototype.on_clip_loaded=function(t,e){this.clip_cache.set(t.path,e),t.type==r.Music&&t.name!=this.curr_music||this.play_clip(e,t.volume,t.loop,t.type,t.cb)},e.prototype.play_clip=function(t,e,o,n,i){var a=this,c=cc.audioEngine.play(t,o,e);n==r.Music?this.music_id=c:n==r.Sound&&(this.sound_ids.push(c),cc.audioEngine.setFinishCallback(c,function(){a.on_sound_finished(c),i&&i.exec()}))},e.prototype.on_sound_finished=function(t){var e=this.sound_ids.findIndex(function(e){return e==t});-1!=e&&this.sound_ids.splice(e,1)},e.prototype.play_sound=function(t,e){if(!this.sound_mute){var o=c.strfmt("sound/{0}",t),n=this.clip_cache.get(o);if(n)this.play_clip(n,this.sound_volume,!1,r.Sound,e);else{var i={type:r.Sound,name:t,path:o,volume:this.sound_volume,loop:!1,cb:e};this.load_task(i)}}},e.prototype.get_sound_mute=function(){return this.sound_mute},e.prototype.set_sound_mute=function(t){this.sound_mute=t,this.sound_ids.forEach(function(e){t?cc.audioEngine.pause(e):cc.audioEngine.resume(e)}),l.LocalStorage.ins().setLocal(l.CONST_STORAGE_KEY.KEY_SOUND_IS_MUTE,t)},e.prototype.set_sound_volume=function(t){this.sound_volume=t,this.sound_ids.forEach(function(e){cc.audioEngine.setVolume(e,t)}),l.LocalStorage.ins().setLocal(l.CONST_STORAGE_KEY.KEY_SOUND_VOLUME,t)},e.prototype.stop_sound=function(){this.sound_ids.forEach(function(t){cc.audioEngine.stop(t)}),this.sound_ids.length=0},e.prototype.clear_cache=function(){this.clip_cache.forEach(function(t){a.loader_mgr.get_inst().release(t)}),this.clip_cache.clear(),this.loading_map.clear(),cc.audioEngine.uncacheAll()},e}(s.default);o.AudioPlayer=u,function(t){t[t.Music=1]="Music",t[t.Sound=2]="Sound"}(r||(r={})),o.AUDIO_CONFIG={Audio_Btn:"button",Audio_levelup:"levelup",Audio_star:"star",Audio_balls:"balls",Audio_Bgm:"bg",Audio_gameover:"gameover",Audio_win:"win",Audio_congra:"congra"},cc._RF.pop()},{"../base/SingletonClass":"SingletonClass","../loader/loader_mgr":"loader_mgr","../localStorage/LocalStorage":"LocalStorage","../util":"util"}],BallItem:[function(t,e,o){"use strict";cc._RF.push(e,"908e7hGo41Op5knNUQ8AuMr","BallItem");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.EnumBallStatus=void 0;var a,c=t("../GameConst"),s=t("../model/GameModel"),l=cc._decorator,u=l.ccclass,p=l.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ball_type=0,e.ball_icon=null,e._ball_status=0,e._power_scale=1,e}return i(e,t),Object.defineProperty(e.prototype,"ball_status",{get:function(){return this._ball_status},set:function(t){var e=this;switch(this._ball_status=t,t){case a.onLand:this.scheduleOnce(function(){e.node&&e.node.active&&(e.node.setPosition(c.default.ins().ball_init_x,c.default.ins().ball_init_y),e.ball_status=a.onReady)},0);break;case a.onReady:case a.onRemoved:}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"power_scale",{get:function(){return this._power_scale},set:function(t){this._power_scale=t,this.ball_icon.node.setScale(t>1?1.5:1)},enumerable:!1,configurable:!0}),e.prototype.reset=function(){this.node.stopAllActions(),this._ball_status=a.onRemoved,this.getComponent(cc.RigidBody).linearVelocity=cc.v2(0,0),this.power_scale=1,this.node.active=!1},e.prototype.init=function(t,e,o){this.power_scale=1,this.node.x=t,this.node.y=e,this.ball_status=o,this.setImage(this.ball_icon,"images/e1")},e.prototype.setImage=function(t,e){cc.resources.load(e,cc.SpriteFrame,function(e,o){t.spriteFrame=o})},e.prototype.fireBall=function(t){var e=t*Math.PI/180,o=c.default.ins().ball_speed+100*s.default.ins().ball_fire_speed;this.getComponent(cc.RigidBody).linearVelocity=cc.v2(Math.sin(e)*o,Math.cos(e)*o),this.ball_status=a.onFire},e.prototype.onBeginContact=function(t,e,o){switch(o.tag){case 1:this.node.active&&(this.getComponent(cc.RigidBody).linearVelocity=cc.v2(0,0),this.ball_status=a.onLand)}},r([p(cc.Integer)],e.prototype,"ball_type",void 0),r([p(cc.Sprite)],e.prototype,"ball_icon",void 0),r([u],e)}(cc.Component);o.default=h,function(t){t[t.onReady=0]="onReady",t[t.onLand=1]="onLand",t[t.onFire=2]="onFire",t[t.onRemoved=3]="onRemoved"}(a=o.EnumBallStatus||(o.EnumBallStatus={})),cc._RF.pop()},{"../GameConst":"GameConst","../model/GameModel":"GameModel"}],BrickItem:[function(t,e,o){"use strict";cc._RF.push(e,"8395bFNuq1NjrVnqs7rG2hF","BrickItem");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../model/GameModel"),c=t("../../common/event/EventDispatch"),s=t("../GameConst"),l=t("./BallItem"),u=t("../../common/audio/AudioPlayer"),p=cc._decorator,h=p.ccclass,d=p.property,_=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.lb_hp=null,e.icon=null,e.icon_hp_reduce=null,e.icon_power=null,e.brick_type=0,e.star_num=0,e.ball_num=0,e.effect_type=0,e.brick_radius_mul=1,e._hp=1,e._color_hp=1,e}return i(e,t),Object.defineProperty(e.prototype,"hp",{get:function(){return this._hp},set:function(t){var e=this,o=this._hp;if(this._hp=t,t<=0){if(o>0){if(this.ball_num>0){for(var n=0;n<this.ball_num;n++)c.EventDispatch.ins().fire(c.Event_Name.GAME_CREATE_BALL);u.AudioPlayer.ins().play_sound("balls")}this.star_num>0&&(c.EventDispatch.ins().fire(c.Event_Name.GAME_STAR_GET_EFFECT,this.node.x,this.node.y,this.star_num),a.default.ins().ball_power+=this.star_num,u.AudioPlayer.ins().play_sound("star")),this.effect_type>0&&c.EventDispatch.ins().fire(c.Event_Name.GAME_POWER_TYPE_CHANGED,this.effect_type),c.EventDispatch.ins().fire(c.Event_Name.GAME_PLAY_BRICK_REMOVE_EFFECT,this.node.x,this.node.y,this.icon_hp_reduce.color)}this.node.active=!1}else{this.lb_hp.string=""+(t>1e6?Math.round(t/1e6)+"M":t>1e3?Math.round(t/1e3)+"K":t);var i=s.default.ins().theme_config[0];this.icon_hp_reduce.color=this.icon.color=i?i.color[Math.ceil(t/this._color_hp)-1]||i.color[0]:cc.Color.WHITE,t<o&&this.icon_hp_reduce.getNumberOfRunningActions()<=0&&(this.icon_hp_reduce.active=!0,this.icon_hp_reduce.opacity=255,this.icon_hp_reduce.runAction(cc.sequence(cc.blink(.2,1),cc.callFunc(function(){e.icon_hp_reduce&&(e.icon_hp_reduce.active=!1)}))))}},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){this.icon_power&&this.icon_power.runAction(cc.repeatForever(cc.sequence(cc.scaleTo(1,1.2,1.2),cc.scaleTo(1,1,1))))},e.prototype.init=function(t,e){var o=s.default.ins().theme_config[0];t=(t=t>o.color.length?o.color.length:t)>0?t:1,this._color_hp=Math.ceil(e/t),this._hp=e,this.hp=e,this.icon_hp_reduce.active=!1,this.icon_hp_reduce.stopAllActions()},e.prototype.reset=function(){this.node.stopAllActions(),this.node.active=!1},e.prototype.update=function(){this.lb_hp.node.angle!==-this.node.angle&&(this.lb_hp.node.angle=-this.node.angle)},e.prototype.onEndContact=function(t,e,o){switch(o.tag){case 100:var n=o.node.getComponent(l.default);if(n&&this.hp>0){var i=a.default.ins().ball_power*n.power_scale;i=i>this.hp?this.hp:i,this.hp-=i,a.default.ins().score+=i}}},r([d(cc.Label)],e.prototype,"lb_hp",void 0),r([d(cc.Node)],e.prototype,"icon",void 0),r([d(cc.Node)],e.prototype,"icon_hp_reduce",void 0),r([d(cc.Node)],e.prototype,"icon_power",void 0),r([d(cc.Integer)],e.prototype,"brick_type",void 0),r([d(cc.Integer)],e.prototype,"star_num",void 0),r([d(cc.Integer)],e.prototype,"ball_num",void 0),r([d(cc.Integer)],e.prototype,"effect_type",void 0),r([d(cc.Integer)],e.prototype,"brick_radius_mul",void 0),r([h],e)}(cc.Component);o.default=_,cc._RF.pop()},{"../../common/audio/AudioPlayer":"AudioPlayer","../../common/event/EventDispatch":"EventDispatch","../GameConst":"GameConst","../model/GameModel":"GameModel","./BallItem":"BallItem"}],CommonLabelScroll:[function(t,e,o){"use strict";cc._RF.push(e,"2b107OGN/dPgaWkAj9qT67K","CommonLabelScroll");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../common/tween/Tween"),c=cc._decorator,s=c.ccclass,l=c.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.lb_num=null,e._num={value:0},e}return i(e,t),e.prototype.onEnable=function(){this.lb_num||(this.lb_num=this.node.getComponent(cc.Label)),this.initValue(this._num.value)},e.prototype.initValue=function(t){this._num.value=t,this.lb_num&&(this.lb_num.string=""+Math.ceil(this._num.value))},e.prototype.updateValue=function(t,e){var o=this;if(null!=e&&this.initValue(e),this.lb_num)if(a.Tween.removeTweens(this._num),t<this._num.value)t==this._num.value?(this._num.value=t,this.lb_num.string=""+t):a.Tween.get(this._num,{onChange:function(){o.lb_num.string=""+Math.ceil(o._num.value)}}).to({value:t},1500);else{var n=t-this._num.value;a.Tween.get(this._num,{onChange:function(){o.lb_num.string=""+Math.ceil(o._num.value)}}).to({value:t},300+(n>10?700:0)+(n>100?500:0)+(n>1e3?500:0))}else this._num.value=t},e.prototype.onDisable=function(){a.Tween.removeTweens(this._num)},r([l(cc.Label)],e.prototype,"lb_num",void 0),r([s],e)}(cc.Component);o.default=u,cc._RF.pop()},{"../../common/tween/Tween":"Tween"}],Common:[function(t,e,o){"use strict";function n(t,e){var o=0,n=0;try{o=t.toString().split(".")[1].length}catch(i){}try{n=e.toString().split(".")[1].length}catch(i){}return Number(t.toString().replace(".",""))/Number(e.toString().replace(".",""))*Math.pow(10,n-o)}cc._RF.push(e,"d14442XQN1NY5NBCRMHZBBm","Common"),Object.defineProperty(o,"__esModule",{value:!0}),o.accDiv=o.accMul=o.toFixed=o.formatPrice=void 0,o.formatPrice=function(t,e,n,i){void 0===e&&(e=4),void 0===n&&(n=!1),void 0===i&&(i=",");var r=o.toFixed(t,e,n).toString(),a=r||"0",c="",s=r.indexOf(".");return-1!==s&&(a=r.substring(0,s),c=r.substring(r.length,s)),a.replace(/\B(?=(?:\d{3})+$)/g,i)+c},o.toFixed=function(t,e,i,r){void 0===e&&(e=4),void 0===i&&(i=!1),void 0===r&&(r=!0);var a="";if(t){var c=""+t;if(c.indexOf("e")>-1||c.indexOf("E")>-1){var s=t.toFixed(e+1);a=s.substring(0,s.length-1)}else if(c.indexOf(".")>-1){var l;0===e?a=c.substring(0,c.indexOf(".")):r&&(l=a.toString().split("."))[1]?(a=c.substring(0,c.indexOf(".")+e+1+1),a=n(Math.round(o.accMul(Number(a),Math.pow(10,e))),Math.pow(10,e)).toString()):a=c.substring(0,c.indexOf(".")+e+1)}else a=c}if(i)if((l=(a=a||"0").toString().split("."))[1]){var u=e-l[1].length;u>0&&((p=[]).length=u,p.fill(0),a+=p.join(""))}else{var p;Number(e)&&((p=[]).length=e,p.fill(0),a=a+"."+p.join(""))}return a},o.accMul=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0);var o=0,n=t.toString(),i=e.toString();try{o+=n.split(".")[1].length}catch(r){}try{o+=i.split(".")[1].length}catch(r){}return Number(n.replace(".",""))*Number(i.replace(".",""))/Math.pow(10,o)},o.accDiv=n,cc._RF.pop()},{}],EventDispatch:[function(t,e,o){"use strict";cc._RF.push(e,"eed4aQJ7TtAqptDX40AW5tU","EventDispatch");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__spreadArrays||function(){for(var t=0,e=0,o=arguments.length;e<o;e++)t+=arguments[e].length;var n=Array(t),i=0;for(e=0;e<o;e++)for(var r=arguments[e],a=0,c=r.length;a<c;a++,i++)n[i]=r[a];return n};Object.defineProperty(o,"__esModule",{value:!0}),o.Event_Name=o.EventDispatch=void 0;var a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.listeners={},e}return i(e,t),e.ins=function(){return t.ins.call(this)},e.prototype.fire=function(t){for(var e=[],o=1;o<arguments.length;o++)e[o-1]=arguments[o];var n=this.listeners[t];if(n)for(var i=0,a=n.length;i<a;i+=2){var c=n[i],s=n[i+1];c&&c.call.apply(c,r([s],e))}},e.prototype.add=function(t,e,o,n){void 0===o&&(o=null),void 0===n&&(n=!1);for(var i=[],a=4;a<arguments.length;a++)i[a-4]=arguments[a];var c=this.listeners[t];c||(this.listeners[t]=c=[]),c.push(e,o),n&&e.call.apply(e,r([o],i))},e.prototype.remove=function(t,e){var o=this.listeners[t];if(o){var n=o.indexOf(e);n<0?cc.warn("EventDispatch remove "+t+", but cb not exists!"):o.splice(n,2)}},e.prototype.clear=function(){for(var t in this.listeners)this.listeners[t].length=0;this.listeners={}},e}(t("../base/SingletonClass").default);o.EventDispatch=a,function(t){t[t.GAME_TIME_CHANGED=0]="GAME_TIME_CHANGED",t[t.GAME_CREATE_BALL=1]="GAME_CREATE_BALL",t[t.GAME_SCORE_CHANGED=2]="GAME_SCORE_CHANGED",t[t.GAME_BALL_POWER_CHANGED=3]="GAME_BALL_POWER_CHANGED",t[t.GAME_BEST_SCORE_CHANGED=4]="GAME_BEST_SCORE_CHANGED",t[t.GAME_ON_TOUCH_MOVE=5]="GAME_ON_TOUCH_MOVE",t[t.GAME_POWER_TYPE_CHANGED=6]="GAME_POWER_TYPE_CHANGED",t[t.GAME_RELIVE=7]="GAME_RELIVE",t[t.GAME_PLAY_BRICK_REMOVE_EFFECT=8]="GAME_PLAY_BRICK_REMOVE_EFFECT",t[t.SHOW_TIPS=9]="SHOW_TIPS",t[t.GAME_STAR_GET_EFFECT=10]="GAME_STAR_GET_EFFECT"}(o.Event_Name||(o.Event_Name={})),cc._RF.pop()},{"../base/SingletonClass":"SingletonClass"}],GameConst:[function(t,e,o){"use strict";cc._RF.push(e,"39d7ekGOCtHeZcPBzFEwSxV","GameConst");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0});var r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ball_init_x=0,e.ball_init_y=-540,e.ball_speed=1e3,e.ball_radius=15,e.brick_radius=43,e.brick_init_x=0,e.brick_init_y=600,e.max_ball_init_count=60,e.max_ball_fire_speed=10,e.theme_price=500,e.sign_interval_sec=3600,e.theme_config=[{color:[cc.color(242,242,242),cc.color(24,225,156),cc.color(20,186,242),cc.color(188,85,250),cc.color(238,196,39),cc.color(244,110,57),cc.color(199,53,67)],theme:"theme0"}],e.brick_type_percent=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,2,2,2,2,2,3,4,5,6,7,7,7,7,7,7,7,7,7,8,8,9,10],e}return i(e,t),e.ins=function(){return t.ins.call(this)},e}(t("../common/base/SingletonClass").default);o.default=r,cc._RF.pop()},{"../common/base/SingletonClass":"SingletonClass"}],GameModel:[function(t,e,o){"use strict";cc._RF.push(e,"cb0cdBciShMAqW7SF8LqDNi","GameModel");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0});var r=t("../../common/base/SingletonClass"),a=t("../../common/event/EventDispatch"),c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._fireBallDt=2,e._ball_power=1,e._ball_fire_speed=2,e._ball_init_count=4,e._score=0,e._revive_times=0,e}return i(e,t),e.ins=function(){return t.ins.call(this)},Object.defineProperty(e.prototype,"fireBallDt",{get:function(){return this._fireBallDt},set:function(t){t=t<2?2:t,this._fireBallDt=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ball_power",{get:function(){return this._ball_power},set:function(t){var e=this._ball_power;t=t<1?1:t,this._ball_power=t,a.EventDispatch.ins().fire(a.Event_Name.GAME_BALL_POWER_CHANGED,e,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ball_fire_speed",{get:function(){return this._ball_fire_speed},set:function(t){t=t<2?2:t,this._ball_fire_speed=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ball_init_count",{get:function(){return this._ball_init_count},set:function(t){t=t<4?4:t,this._ball_init_count=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"score",{get:function(){return this._score},set:function(t){t=t<0?0:t;var e=this._score;this._score=t,a.EventDispatch.ins().fire(a.Event_Name.GAME_SCORE_CHANGED,e,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"revive_times",{get:function(){return this._revive_times},set:function(t){t=t<0?0:t,this._revive_times=t},enumerable:!1,configurable:!0}),e.prototype.init=function(){this.reset()},e.prototype.reset=function(){this.score=0,this.revive_times=0,this.ball_init_count=5,this.ball_fire_speed=1,this.ball_power=1},e}(r.default);o.default=c,cc._RF.pop()},{"../../common/base/SingletonClass":"SingletonClass","../../common/event/EventDispatch":"EventDispatch"}],GameView:[function(t,e,o){"use strict";cc._RF.push(e,"da5e90fyi5E2ok/vF/eouo6","GameView");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a},a=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(i,r){function a(t){try{s(n.next(t))}catch(e){r(e)}}function c(t){try{s(n.throw(t))}catch(e){r(e)}}function s(t){var e;t.done?i(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,c)}s((n=n.apply(t,e||[])).next())})},c=this&&this.__generator||function(t,e){var o,n,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function c(t){return function(e){return s([t,e])}}function s(r){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,n=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(c){r=[6,c],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s=t("./item/BallItem"),l=t("./GameConst"),u=t("./model/GameModel"),p=t("./item/BrickItem"),h=t("../common/random/RandomUtil"),d=t("../common/event/EventDispatch"),_=t("../common/audio/AudioPlayer"),f=t("../common/util"),m=t("../common/loader/loader_mgr"),y=t("../common/tween/Tween"),v=t("../common/timer/timer_mgr"),g=t("./common/Common"),b=t("./model/State"),w=cc._decorator,O=w.ccclass,C=w.property,B=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bg=null,e.bgTitle=null,e.node_top=null,e.stopButton=null,e.startButton=null,e.node_physics=null,e.lb_ball_count=null,e.lb_ball_power=null,e.node_freeze=null,e.bottomBarBox=null,e.fucPrefab=null,e.basePrefab=null,e.lb_score=null,e.node_power_progress=null,e.balls_ins=[],e.bricks_ins=[],e.node_star_img=null,e.star_ins=null,e.overLine=null,e.overObj=null,e.clearLine=null,e.clearAll=null,e.cannon_head=null,e.multipleBallCount=0,e.brick_max_count=7,e._star_pool=[],e.balls_pool=[],e.bricks_pool=[],e.balls_in_game=[],e.bricks_in_game=[],e._updateDt=0,e._brick_speed=1,e._moved_length=0,e._moved_level=0,e._power_type=0,e._isGameOver=!1,e.selfFucActiveSet=new Set,e._brick_img_pool=[],e}return i(e,t),e.prototype.onEnable=function(){b.default.ins().mainNear.contract.play_game({account_id:b.default.ins().mainNear.ownerKey}),b.default.ins().isPay=!1},e.prototype.onLoad=function(){var t=this;this.stopButton.on("touchstart",function(){return t.onGameStatusToogle(!1)},this),this.startButton.on("touchstart",function(){return t.onGameStatusToogle(!0)},this),this.initFuc();var e=Math.round(1e6+8999999*Math.random()).toString();h.RandomUtil.ins().init(e),this.bg.on("touchmove",this.onTouchMove,this),cc.director.getPhysicsManager().enabled=!0,cc.director.getPhysicsManager().enabledAccumulator=!0;for(var o=0,n=this.balls_ins.length;o<n;)this.balls_pool[o++]=[];for(o=0,n=this.bricks_ins.length;o<n;)this.bricks_pool[o++]=[];this.gameStart()},e.prototype.initFuc=function(){var t=this;this.bottomBarBox.children.length>0&&this.bottomBarBox.removeAllChildren(),new Array(5).fill(1).forEach(function(e,o){var n=null;if(2===o)n=cc.instantiate(t.basePrefab),t.cannon_head=n.getChildByName("baseBox");else{n=cc.instantiate(t.fucPrefab);var i=o>1?o-1:o;b.default.ins().imageList.map(function(e,o){if(e.sort===i&&e.payCount>0){var r=n.getComponent(cc.Sprite);cc.resources.load(e.url,cc.SpriteFrame,function(t,e){r.spriteFrame=e});var a=n.getChildByName("countBox");a.active=!0,a.getChildByName("title").getComponent(cc.Label).string=e.title;var c=n.getChildByName("count");c.active=!0,c.getComponent(cc.Label).string="x"+e.payCount,n.on("touchstart",function(){return t.onFucTouchstart(n,e,o)},t)}})}t.bottomBarBox.addChild(n)})},e.prototype.onFucTouchstart=function(t,e,o){return a(this,void 0,void 0,function(){var n,i,r,a,s,l,p,h=this;return c(this,function(){if(this._isGameOver||this.startButton.active)return[2];if(b.default.ins().imageList[o].payCount<=0)return[2];if(this.selfFucActiveSet.has(e.type))return[2];if((2===e.type||3===e.type||4===e.type)&&(this.selfFucActiveSet.has(2)||this.selfFucActiveSet.has(3)||this.selfFucActiveSet.has(4)))return[2];switch(this.selfFucActiveSet.add(e.type),e.payList.length>0&&(n=b.default.ins().imageList[o].payList.splice(0,1)[0].token_id,b.default.ins().mainNear.contract.nft_burn({token_id:n})),this.bgTitle.active=!0,i=this.bgTitle.getComponent(cc.Label),r=1,e.type){case 6:i.string="",this._isGameOver=!0,cc.director.getPhysicsManager().enabled=!1,this.bricks_in_game.forEach(function(t){if(Math.abs(t.node.y-h.bricks_in_game[0].node.y)<45&&(t.node.active=!1,u.default.ins().score+=Number(t.lb_hp.string),t.star_num>0&&(u.default.ins().ball_power+=t.star_num,_.AudioPlayer.ins().play_sound("star")),t.ball_num>0)){for(var e=0;e<t.ball_num;e++)d.EventDispatch.ins().fire(d.Event_Name.GAME_CREATE_BALL);_.AudioPlayer.ins().play_sound("balls")}}),this.clearLine.active=!0,this.clearLine.setPosition(750,this.bricks_in_game[0].node.y),cc.tween(this.clearLine).to(.3,{x:-750}).call(function(){h._isGameOver=!1,cc.director.getPhysicsManager().enabled=!0,h.clearLine.active=!1}).start();break;case 1:this.node_freeze.active=!0,i.string="\u51bb\u7ed3\u5168\u5c4f";break;case 2:this.cannon_head.scale=1.4,i.string="\u4e24\u500d\u52a0\u901f",r=2;break;case 3:this.cannon_head.scale=1.7,i.string="\u4e09\u500d\u52a0\u901f",r=3;break;case 4:this.cannon_head.scale=2,i.string="\u4e94\u500d\u52a0\u901f",r=5;break;case 5:i.string="",this._isGameOver=!0,cc.director.getPhysicsManager().enabled=!1,this.bricks_in_game.forEach(function(t){t.node.active=!1;var e=0;if(-1!==t.lb_hp.string.indexOf("M")&&(e=1e6*Number(t.lb_hp.string.split("M")[0])),-1!==t.lb_hp.string.indexOf("K")&&(e=1e3*Number(t.lb_hp.string.split("K")[0])),u.default.ins().score+=e,t.star_num>0&&(u.default.ins().ball_power+=t.star_num,_.AudioPlayer.ins().play_sound("star")),t.ball_num>0){for(var o=0;o<t.ball_num;o++)d.EventDispatch.ins().fire(d.Event_Name.GAME_CREATE_BALL);_.AudioPlayer.ins().play_sound("balls")}}),this.clearAll.active=!0,cc.tween(this.clearAll.getChildByName("bg3")).to(.3,{angle:180}).to(.3,{angle:360}).repeat(2).call(function(){h.clearAll.active=!1,h.clearAll.getChildByName("bg3").angle=-0,h._isGameOver=!1,cc.director.getPhysicsManager().enabled=!0}).start()}return this.multipleBallCount=u.default.ins().ball_power*(r-1),u.default.ins().ball_power+=this.multipleBallCount,b.default.ins().imageList[o].payCount-=1,t.getChildByName("count").getComponent(cc.Label).string="x"+b.default.ins().imageList[o].payCount.toString(),_.AudioPlayer.ins().play_sound("levelup"),(a=t.getChildByName("timeBox")).active=!0,s=a.getComponent(cc.Sprite),cc.tween(s).to(e.time,{fillRange:0}).start(),l=e.time,p=function(){l--,h.bgTitle.active=!1,l<=0&&(h.unschedule(p),s.fillRange=1,a.active=!1,1===e.type&&(h.node_freeze.active=!1),2!==e.type&&3!==e.type&&4!==e.type||(h.cannon_head.scale=1,u.default.ins().ball_power-=h.multipleBallCount,h.multipleBallCount=0),h.selfFucActiveSet.delete(e.type))},this.schedule(p,1),[2]})})},e.prototype.onGameStatusToogle=function(t){this.overObj.active||(_.AudioPlayer.ins().play_sound("btn"),t?(this.stopButton.active=!0,this.startButton.active=!1,this._isGameOver=!1,cc.director.getPhysicsManager().enabled=!0,_.AudioPlayer.ins().play_music("bg")):(this.stopButton.active=!1,this.startButton.active=!0,this._isGameOver=!0,cc.director.getPhysicsManager().enabled=!1,_.AudioPlayer.ins().stop_music()))},e.prototype.onTouchMove=function(t){var e=t.getDeltaX(),o=t.getDeltaY(),n=.3*Math.sqrt(e*e+o*o),i=Math.sign(e),r=-this.cannon_head.angle+n*i;r=Math.abs(r)>=85?85*Math.sign(r):r,this.cannon_head.angle=-r},e.prototype.gameStart=function(){d.EventDispatch.ins().add(d.Event_Name.GAME_CREATE_BALL,this.createBall,this),d.EventDispatch.ins().add(d.Event_Name.GAME_RELIVE,this.gameRelive,this),d.EventDispatch.ins().add(d.Event_Name.GAME_ON_TOUCH_MOVE,this.onTouchMove,this),d.EventDispatch.ins().add(d.Event_Name.GAME_POWER_TYPE_CHANGED,this.updateGamePowerType,this),d.EventDispatch.ins().add(d.Event_Name.GAME_SCORE_CHANGED,this.updateScore,this,!0),d.EventDispatch.ins().add(d.Event_Name.GAME_BALL_POWER_CHANGED,this.updateBallPower,this,!0),d.EventDispatch.ins().add(d.Event_Name.GAME_PLAY_BRICK_REMOVE_EFFECT,this.playBrickDeleteEffect,this),d.EventDispatch.ins().add(d.Event_Name.GAME_STAR_GET_EFFECT,this.updateStarNumGetEffect,this),_.AudioPlayer.ins().play_music("bg"),this.resetGame()},e.prototype.resetGame=function(){this.node_physics.active=!0,this.cannon_head.angle=0,cc.director.getPhysicsManager().enabled=!0,this._updateDt=0,this._moved_length=0,this._moved_level=0,this._isGameOver=!1,this.updateGamePowerType(0),u.default.ins().reset();for(var t=u.default.ins().ball_init_count,e=0;e<t;e++)this.createBall();for(var o=l.default.ins().brick_radius,n=0;n<2;n++)for(var i=Math.round(this.brick_max_count/2),r=-1*Math.floor(this.brick_max_count/2);r<i;r++){var a=(n+1)*u.default.ins().ball_power+(t-4);a=a<0?1:a,this.createBrick(r*o*2+l.default.ins().brick_init_x,n*o*2+l.default.ins().brick_init_y,a)}this.lb_ball_power.string=""+u.default.ins().ball_power},e.prototype.update=function(t){var e=this;if(v.TimerMgr.getInst().update(t),!this._isGameOver){if(this.node_freeze.active&&(this._brick_speed=0),this._power_type>0)switch(this.node_power_progress.width-=1.5,this.node_power_progress.active&&this.node_power_progress.width<=0&&this.updateGamePowerType(0),this._power_type){case 3:this._brick_speed=0}this._updateDt++,this._moved_length+=this._brick_speed,this._updateDt%u.default.ins().fireBallDt!=0&&2!==this._power_type||this.balls_in_game.some(function(t){return t.ball_status===s.EnumBallStatus.onReady&&(0===t.ball_type||2===e._power_type)&&(t.power_scale=1===e._power_type?2:1,t.fireBall(-e.cannon_head.angle),!0)});var o=l.default.ins().brick_radius,n=u.default.ins().ball_power-this.multipleBallCount;if(Math.floor(this._moved_length/4/o)>this._moved_level){this._moved_level++;var i=this.balls_in_game.length/(2===this._power_type?2:1),r=Math.ceil(i*n*.5+this._moved_level*n*1.2),a=l.default.ins().brick_type_percent,c=-999,p=-999,d=-999;this._moved_level%12==0&&(c=h.RandomUtil.ins().randomNum(-2,3),this.createBrick(c*o*2-o+l.default.ins().brick_init_x,o+l.default.ins().brick_init_y,h.RandomUtil.ins().randomNum(3*r,6*r),h.RandomUtil.ins().randomNum(14,16),10)),this._moved_level%11==0&&(p=h.RandomUtil.ins().randomNum(0,1),d=h.RandomUtil.ins().randomNum(-3,3));for(var _=0;_<2;_++)for(var f=-3;f<4;f++)if(f===c||f===c-1);else{var m=_===p&&f===d?h.RandomUtil.ins().randomNum(n,Math.ceil(r/2)):h.RandomUtil.ins().randomNum(-Math.round(r/(this._moved_level%5+1)),r),y=_===p&&f===d?h.RandomUtil.ins().randomNum(11,13):a[h.RandomUtil.ins().randomNum(0,a.length-1)];m>=n&&this.createBrick(f*o*2+l.default.ins().brick_init_x,_*o*2+l.default.ins().brick_init_y,m,y,Math.ceil(10*m/r))}}for(var g=9999,b=0,w=this.bricks_in_game.length;b<w;b++){var O=this.bricks_in_game[b];if(O&&O.node){var C=O.node;if(O.hp<=0||!C.active)this._updateDt%60==0&&(O.reset(),this.bricks_in_game.splice(b,1),this.bricks_pool[O.brick_type].push(C),b--);else{if(C.y-=this._brick_speed,C.y-O.brick_radius_mul*o<=this.overLine.y)return void this.gameOver();C.y<g&&(g=C.y)}}}this._brick_speed=g>l.default.ins().ball_init_y+7*o?1:g>l.default.ins().ball_init_y+5*o?.9:.6}},e.prototype.createBall=function(t,e,o,n){void 0===t&&(t=l.default.ins().ball_init_x),void 0===e&&(e=l.default.ins().ball_init_y),void 0===o&&(o=s.EnumBallStatus.onReady),void 0===n&&(n=0);var i=this.balls_pool[n].shift();i||(i=cc.instantiate(this.balls_ins[n]),this.node_physics.addChild(i));var r=i.getComponent(s.default);r.init(t,e,o),i.active=!0,this.balls_in_game.unshift(r),this.lb_ball_count.string=""+this.balls_in_game.length/2,0===n&&this.createBall(l.default.ins().ball_init_x,l.default.ins().ball_init_y,s.EnumBallStatus.onReady,1)},e.prototype.createBrick=function(t,e,o,n,i){void 0===t&&(t=l.default.ins().brick_init_x),void 0===e&&(e=l.default.ins().brick_init_y),void 0===o&&(o=1),void 0===n&&(n=0),void 0===i&&(i=1),n===this.brick_max_count&&this.balls_in_game.length>200&&(n=0);var r=this.bricks_pool[n].shift();r||(r=cc.instantiate(this.bricks_ins[n]),this.node_physics.addChild(r));var a=r.getComponent(p.default);r.active=!0,r.x=t,r.y=e,a.init(i,o),this.bricks_in_game.push(a)},e.prototype.updateScore=function(){this.lb_score.string=g.formatPrice(u.default.ins().score,0,!1," ")},e.prototype.updateBallPower=function(){this.lb_ball_power.string=""+u.default.ins().ball_power},e.prototype.updateStarNumGetEffect=function(t,e,o){for(var n=this,i=this.node_top.convertToNodeSpaceAR(this.node_star_img.convertToWorldSpaceAR(cc.v2(0,0))),r=function(o){var r=a._star_pool.shift();r||(r=cc.instantiate(a.star_ins),a.node_top.addChild(r)),r.x=t,r.y=e,r.angle=0,r.active=!0,y.Tween.get(r).to({angle:720,x:i.x,y:i.y},800+100*o,y.Ease.getBackInOut(1.2)).call(function(){r.active=!1,n._star_pool.push(r),y.Tween.get(n.node_star_img).to({scale:1.2},300).to({scale:1},300,y.Ease.backInOut).call(function(){u.default.ins().ball_power+=1,n.lb_ball_power.string=""+u.default.ins().ball_power})})},a=this,c=0;c<o;c++)r(c)},e.prototype.playBrickDeleteEffect=function(t,e,o){var n=this,i=l.default.ins().theme_config[0];i&&m.loader_mgr.get_inst().loadAsset("texture/plist/customize",f.gen_handler(function(r){var a=r.getSpriteFrame(i.theme);if(a)for(var c=function(i){var r=i%3-1.5,c=Math.floor(i/3)-1.5,s=t+r*(100+150*Math.random()),l=e+c*(100+150*Math.random()),u=n._brick_img_pool.shift();u||((u=new cc.Node).addComponent(cc.Sprite),n.node_physics.addChild(u)),u.active=!0,u.angle=0,u.getComponent(cc.Sprite).spriteFrame=a,u.color=o;var p=50*Math.random()+50;u.width=u.height=p,u.x=t,u.y=e,y.Tween.get(u).to({x:s,y:l,width:p/3,height:p/3,angle:1e3*Math.random()},500*Math.random()+500).call(function(){u.active=!1,n._brick_img_pool.push(u)})},s=0;s<9;s++)c(s)}),cc.SpriteAtlas)},e.prototype.updateGamePowerType=function(t){if(void 0===t&&(t=0),t>0){if(0===this._power_type){switch(this.node_power_progress.active=!0,this.node_power_progress.width=750,this._power_type=t,this.bgTitle.getComponent(cc.Label),t){case 2:this.cannon_head.scale=1.4;break;case 3:this.node_freeze.active=!0}this.lb_ball_count.node.color=this.node_power_progress.color=[cc.Color.WHITE,cc.Color.RED,cc.Color.YELLOW,cc.Color.GRAY][t]||cc.Color.WHITE,_.AudioPlayer.ins().play_sound("levelup")}}else this.node_power_progress.active=!1,this.node_power_progress.width=750,this.lb_ball_count.node.color=cc.color(230,150,26),this.selfFucActiveSet.has(1)||(this.node_freeze.active=!1),this.selfFucActiveSet.has(2)||this.selfFucActiveSet.has(3)||this.selfFucActiveSet.has(4)||(this.cannon_head.scale=1),this._power_type=t},e.prototype.gameRelive=function(){var t=this;this.bricks_in_game.forEach(function(e){e.reset(),t.bricks_pool[e.brick_type].push(e.node)}),this.bricks_in_game=[],this.overObj.active=!1,this._isGameOver=!1,cc.director.getPhysicsManager().enabled=!0,_.AudioPlayer.ins().play_music("bg")},e.prototype.gameOver=function(){this._isGameOver=!0,cc.director.getPhysicsManager().enabled=!1,this.overObj.active=!0,d.EventDispatch.ins().add(d.Event_Name.GAME_RELIVE,this.gameRelive,this),_.AudioPlayer.ins().stop_music()},r([C(cc.Node)],e.prototype,"bg",void 0),r([C(cc.Node)],e.prototype,"bgTitle",void 0),r([C(cc.Node)],e.prototype,"node_top",void 0),r([C(cc.Node)],e.prototype,"stopButton",void 0),r([C(cc.Node)],e.prototype,"startButton",void 0),r([C(cc.Node)],e.prototype,"node_physics",void 0),r([C(cc.Label)],e.prototype,"lb_ball_count",void 0),r([C(cc.Label)],e.prototype,"lb_ball_power",void 0),r([C(cc.Node)],e.prototype,"node_freeze",void 0),r([C(cc.Node)],e.prototype,"bottomBarBox",void 0),r([C(cc.Prefab)],e.prototype,"fucPrefab",void 0),r([C(cc.Prefab)],e.prototype,"basePrefab",void 0),r([C(cc.Label)],e.prototype,"lb_score",void 0),r([C(cc.Node)],e.prototype,"node_power_progress",void 0),r([C([cc.Prefab])],e.prototype,"balls_ins",void 0),r([C([cc.Prefab])],e.prototype,"bricks_ins",void 0),r([C(cc.Node)],e.prototype,"node_star_img",void 0),r([C(cc.Prefab)],e.prototype,"star_ins",void 0),r([C(cc.Node)],e.prototype,"overLine",void 0),r([C(cc.Node)],e.prototype,"overObj",void 0),r([C(cc.Node)],e.prototype,"clearLine",void 0),r([C(cc.Node)],e.prototype,"clearAll",void 0),r([O],e)}(cc.Component);o.default=B,cc._RF.pop()},{"../common/audio/AudioPlayer":"AudioPlayer","../common/event/EventDispatch":"EventDispatch","../common/loader/loader_mgr":"loader_mgr","../common/random/RandomUtil":"RandomUtil","../common/timer/timer_mgr":"timer_mgr","../common/tween/Tween":"Tween","../common/util":"util","./GameConst":"GameConst","./common/Common":"Common","./item/BallItem":"BallItem","./item/BrickItem":"BrickItem","./model/GameModel":"GameModel","./model/State":"State"}],LocalStorage:[function(t,e,o){"use strict";cc._RF.push(e,"268f8O0nHBNeLgcPVchYcOV","LocalStorage");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.CONST_STORAGE_KEY=o.LocalStorage=void 0;var r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._game_key="nonstop_balls_tt_",e}return i(e,t),e.ins=function(){return t.ins.call(this)},e.prototype.setLocal=function(t,e){try{"object"==typeof e&&(e=JSON.stringify(e)),cc.sys.localStorage.setItem(this.str_encrypt(this._game_key+t),this.str_encrypt(e,this._game_key+t))}catch(o){}},e.prototype.getLocal=function(t,e){try{var o=cc.sys.localStorage.getItem(this.str_encrypt(this._game_key+t));if(null==o)return e;switch(o=this.str_decrypt(o,this._game_key+t),typeof e){case"object":var n=e;try{var i=JSON.parse(o);"object"==typeof i&&(n=i)}catch(r){}return n;case"boolean":return"true"===o;case"number":return Number(o)||e}return o}catch(a){return e}},e.prototype.str_encrypt=function(t,e){void 0===e&&(e=this._game_key);for(var o=0,n=0,i=e.length;n<i;n++)o+=e.charCodeAt(n);t=t.toString(),t+=e;for(var r=String.fromCharCode(t.charCodeAt(0)+t.length*o),a=1;a<t.length;a++)r+=String.fromCharCode(t.charCodeAt(a)+t.charCodeAt(a-1));return encodeURIComponent(r)},e.prototype.str_decrypt=function(t,e){void 0===e&&(e=this._game_key);for(var o=0,n=0,i=e.length;n<i;n++)o+=e.charCodeAt(n);t=t.toString(),t=decodeURIComponent(t);for(var r=String.fromCharCode(t.charCodeAt(0)-t.length*o),a=1;a<t.length;a++)r+=String.fromCharCode(t.charCodeAt(a)-r.charCodeAt(a-1));return r.slice(0,r.length-e.length)},e}(t("../base/SingletonClass").default);o.LocalStorage=r,o.CONST_STORAGE_KEY={KEY_MUSIC_VOLUME:"KEY_MUSIC_VOLUME",KEY_SOUND_VOLUME:"KEY_SOUND_VOLUME",KEY_SOUND_IS_MUTE:"KEY_SOUND_IS_MUTE",KEY_MUSIC_IS_MUTE:"KEY_MUSIC_IS_MUTE"},cc._RF.pop()},{"../base/SingletonClass":"SingletonClass"}],MainView:[function(t,e,o){"use strict";cc._RF.push(e,"7ed7dlumpFJ+LVYWQAFTYO3","MainView");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a},a=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(i,r){function a(t){try{s(n.next(t))}catch(e){r(e)}}function c(t){try{s(n.throw(t))}catch(e){r(e)}}function s(t){var e;t.done?i(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,c)}s((n=n.apply(t,e||[])).next())})},c=this&&this.__generator||function(t,e){var o,n,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function c(t){return function(e){return s([t,e])}}function s(r){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,n=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(c){r=[6,c],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s=t("./common/Common"),l=t("./model/State"),u=window.nearApi,p=u.WalletAccount,h=u.keyStores,d=u.connect,_=u.Contract,f=cc._decorator,m=f.ccclass,y=f.property,v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.maxScore=null,e.ball=null,e.awardTotal=null,e.userName=null,e.myMoney=null,e.startButton=null,e.startTitle=null,e.startPrice=null,e.reloginButton=null,e.packBox=null,e.pack=null,e.storeBox=null,e.store=null,e.loadingBox=null,e.loading=null,e}return i(e,t),e.prototype.onLoad=function(){return a(this,void 0,void 0,function(){var t,e,o=this;return c(this,function(n){switch(n.label){case 0:return this.startButton.on("touchstart",this.onStartButton,this),this.reloginButton.on("touchstart",this.onRelogin,this),this.pack.on("touchstart",this.onPack,this),this.store.on("touchstart",this.onStore,this),t=this.ball.getComponent(cc.Animation),(e=t.play()).wrapMode=cc.WrapMode.Loop,e.repeatCount=1/0,this.maxScore.schedule(function(){o.initNear()},5),[4,this.initNear()];case 1:return n.sent(),this.initMarket(),[4,l.default.ins().getList()];case 2:return n.sent(),[2]}})})},e.prototype.update=function(){this.maxScore.string=s.formatPrice(l.default.ins().mainNear.maxScore,0,!1,","),this.awardTotal.string=s.formatPrice(l.default.ins().mainNear.poolBalance,4)+" Near",this.myMoney.string=s.formatPrice(l.default.ins().mainNear.balance)+" Near",l.default.ins().isLogin&&(this.startPrice.active=!0,this.startTitle.string="\u5f00\u59cb\u6e38\u620f",this.reloginButton.active=!0,this.packBox.active=!0,this.storeBox.active=!0),l.default.ins().isPay&&(this.startTitle.string="\u5f00\u59cb\u6e38\u620f",this.startPrice.active=!1)},e.prototype.onPack=function(){cc.director.loadScene("pack")},e.prototype.onStore=function(){cc.director.loadScene("store")},e.prototype.toogleLoading=function(t){if(void 0===t&&(t=!1),t){this.loadingBox.active=!0;var e=this.loading.getComponent(cc.Animation).play();e.wrapMode=cc.WrapMode.Loop,e.repeatCount=1/0}else this.loadingBox.active=!1},e.prototype.onStartButton=function(){return a(this,void 0,void 0,function(){return c(this,function(){return l.default.ins().isLogin?l.default.ins().isPay?cc.director.loadScene("game"):this.pay():this.goToGetAuth(),[2]})})},e.prototype.initNear=function(){return a(this,void 0,void 0,function(){var t,e,o,n,i,r;return c(this,function(a){switch(a.label){case 0:return t=l.default.ins().mainNear,[4,d(Object.assign(l.default.ins().mianNearConfig,{deps:{keyStore:new h.BrowserLocalStorageKeyStore}}))];case 1:return t.near=a.sent(),l.default.ins().mainNear.walletAccount=new p(l.default.ins().mainNear.near),l.default.ins().isLogin=l.default.ins().mainNear.walletAccount.isSignedIn(),l.default.ins().mainNear.ownerKey=l.default.ins().mainNear.walletAccount.getAccountId(),this.userName.string=l.default.ins().mainNear.ownerKey,l.default.ins().isLogin?(l.default.ins().mainNear.contract=new _(l.default.ins().mainNear.walletAccount.account(),l.default.ins().mianNearConfig.contractName,{viewMethods:["list_score","check_sign","nft_tokens_for_owner"],changeMethods:["upload_score","sign_up","play_game","nft_burn","nft_transfer","nft_approve"],sender:l.default.ins().mainNear.walletAccount.account()}),[4,l.default.ins().mainNear.contract.list_score()]):[3,6];case 2:return e=a.sent(),l.default.ins().mainNear.poolBalance=e.total_reward/1e24,e.rank&&e.rank.length>0&&(l.default.ins().mainNear.maxScore=e.rank[0].score||0),[4,l.default.ins().mainNear.near.account(l.default.ins().mainNear.walletAccount.getAccountId())];case 3:return o=a.sent(),n=l.default.ins().mainNear,[4,o.getAccountBalance()];case 4:return n.balance=a.sent().available/1e24,i=l.default.ins(),[4,l.default.ins().mainNear.contract.check_sign({account_id:l.default.ins().mainNear.ownerKey})];case 5:return i.isPay=a.sent(),l.default.ins().isPay?(r=localStorage.getItem("initScene"))&&(localStorage.removeItem("initScene"),cc.director.loadScene(r)):localStorage.removeItem("initScene"),[3,7];case 6:localStorage.removeItem("imageList"),a.label=7;case 7:return[2]}})})},e.prototype.goToGetAuth=function(){l.default.ins().mainNear.walletAccount.requestSignIn(l.default.ins().mianNearConfig.contractName,"demo")},e.prototype.pay=function(){return a(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return this.toogleLoading(!0),[4,l.default.ins().mainNear.contract.sign_up({account_id:l.default.ins().mainNear.ownerKey},3e14,window.nearApi.utils.format.parseNearAmount("1"))];case 1:return t.sent(),[2]}})})},e.prototype.onRelogin=function(){localStorage.removeItem("imageList"),l.default.ins().mainNear.walletAccount.signOut(),this.goToGetAuth()},e.prototype.initMarket=function(){return a(this,void 0,void 0,function(){var t;return c(this,function(e){switch(e.label){case 0:return t=l.default.ins().storeNear,[4,d(Object.assign(l.default.ins().storeNearConfig,{deps:{keyStore:new h.BrowserLocalStorageKeyStore}}))];case 1:return t.near=e.sent(),l.default.ins().storeNear.walletAccount=new p(l.default.ins().storeNear.near),l.default.ins().storeNear.contract=new _(l.default.ins().storeNear.walletAccount.account(),l.default.ins().storeNearConfig.contractName,{viewMethods:["get_sales","get_sales_by_owner_id"],changeMethods:["offer"],sender:l.default.ins().storeNear.walletAccount.account()}),l.default.ins().storeNear.ownerKey=l.default.ins().storeNear.walletAccount.getAccountId(),[2]}})})},r([y(cc.Label)],e.prototype,"maxScore",void 0),r([y(cc.Node)],e.prototype,"ball",void 0),r([y(cc.Label)],e.prototype,"awardTotal",void 0),r([y(cc.Label)],e.prototype,"userName",void 0),r([y(cc.Label)],e.prototype,"myMoney",void 0),r([y(cc.Node)],e.prototype,"startButton",void 0),r([y(cc.Label)],e.prototype,"startTitle",void 0),r([y(cc.Node)],e.prototype,"startPrice",void 0),r([y(cc.Node)],e.prototype,"reloginButton",void 0),r([y(cc.Node)],e.prototype,"packBox",void 0),r([y(cc.Node)],e.prototype,"pack",void 0),r([y(cc.Node)],e.prototype,"storeBox",void 0),r([y(cc.Node)],e.prototype,"store",void 0),r([y([cc.Node])],e.prototype,"loadingBox",void 0),r([y([cc.Node])],e.prototype,"loading",void 0),r([m],e)}(cc.Component);o.default=v,cc._RF.pop()},{"./common/Common":"Common","./model/State":"State"}],Over:[function(t,e,o){"use strict";cc._RF.push(e,"9859fMkmBtA8ofFDi2WwDrb","Over");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a},a=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(i,r){function a(t){try{s(n.next(t))}catch(e){r(e)}}function c(t){try{s(n.throw(t))}catch(e){r(e)}}function s(t){var e;t.done?i(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,c)}s((n=n.apply(t,e||[])).next())})},c=this&&this.__generator||function(t,e){var o,n,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function c(t){return function(e){return s([t,e])}}function s(r){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,n=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(c){r=[6,c],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s=t("./common/Common"),l=t("./model/GameModel"),u=t("../common/audio/AudioPlayer"),p=t("../common/event/EventDispatch"),h=t("./model/State"),d=cc._decorator,_=d.ccclass,f=d.property,m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.overBox=null,e.mask=null,e.loading=null,e.fail=null,e.win=null,e.count=null,e.countBox=null,e.diff=null,e.reliveCount=null,e.reliveBox=null,e.reloadBox=null,e.goBack=null,e.getMoneyBox=null,e.getMoneyTitle=null,e}return i(e,t),e.prototype.onLoad=function(){this.mask.on("touchstart",function(){},this,!0)},e.prototype.onEnable=function(){return a(this,void 0,void 0,function(){var t,e;return c(this,function(){return this.win.active=!1,this.fail.active=!1,this.countBox.active=!1,this.goBack.on("touchstart",this.onGoBack,this),t=l.default.ins().score,this.count.string=s.formatPrice(t,0,!1," "),this.loading.active=!0,cc.tween(this.loading).repeatForever(cc.tween().by(.3,{angle:90})).start(),this.loading.active=!1,this.countBox.active=!0,Number(t)>Number(h.default.ins().mainNear.maxScore)?(h.default.ins().mainNear.contract.upload_score({account_id:h.default.ins().mainNear.ownerKey,score:t}),this.win.active=!0,this.fail.active=!1,this.getMoneyTitle.string="\u4fdd\u6301\u4e00\u5929\u64c2\u4e3b\u540e\u5956\u52b1\u81ea\u52a8\u53d1\u653e",this.getMoneyBox.on("touchstart",this.onGoBack),u.AudioPlayer.ins().play_sound("congra")):(this.win.active=!1,this.fail.active=!0,this.reliveBox.once("touchstart",this.onReliveBox,this),this.reloadBox.on("touchstart",this.onReloadBox,this),this.diff.string=s.formatPrice(h.default.ins().mainNear.maxScore-t,0,!1," "),e=h.default.ins().imageList.find(function(t){return 7===t.type}),this.reliveCount.string="x"+e.payCount.toString(),u.AudioPlayer.ins().play_sound("win")),[2]})})},e.prototype.onGoBack=function(){cc.director.loadScene("main")},e.prototype.onReliveBox=function(){return a(this,void 0,void 0,function(){var t,e;return c(this,function(o){switch(o.label){case 0:return(t=h.default.ins().imageList.findIndex(function(t){return 7===t.type}))>-1?(e=h.default.ins().imageList[t].payList.splice(0,1)[0].token_id,h.default.ins().imageList[t].payCount-=1,[4,h.default.ins().mainNear.contract.nft_burn({token_id:e})]):[3,2];case 1:return o.sent(),p.EventDispatch.ins().fire(p.Event_Name.GAME_RELIVE),[3,2];case 2:return[2]}})})},e.prototype.onReloadBox=function(){return a(this,void 0,void 0,function(){return c(this,function(){return localStorage.setItem("initScene","game"),h.default.ins().mainNear.contract.sign_up({account_id:h.default.ins().mainNear.ownerKey},3e14,window.nearApi.utils.format.parseNearAmount("1")),[2]})})},r([f(cc.Node)],e.prototype,"overBox",void 0),r([f(cc.Node)],e.prototype,"mask",void 0),r([f(cc.Node)],e.prototype,"loading",void 0),r([f(cc.Node)],e.prototype,"fail",void 0),r([f(cc.Node)],e.prototype,"win",void 0),r([f(cc.Label)],e.prototype,"count",void 0),r([f(cc.Node)],e.prototype,"countBox",void 0),r([f(cc.Label)],e.prototype,"diff",void 0),r([f(cc.Label)],e.prototype,"reliveCount",void 0),r([f(cc.Node)],e.prototype,"reliveBox",void 0),r([f(cc.Node)],e.prototype,"reloadBox",void 0),r([f(cc.Node)],e.prototype,"goBack",void 0),r([f(cc.Node)],e.prototype,"getMoneyBox",void 0),r([f(cc.Label)],e.prototype,"getMoneyTitle",void 0),r([_],e)}(cc.Component);o.default=m,cc._RF.pop()},{"../common/audio/AudioPlayer":"AudioPlayer","../common/event/EventDispatch":"EventDispatch","./common/Common":"Common","./model/GameModel":"GameModel","./model/State":"State"}],PackItem:[function(t,e,o){"use strict";cc._RF.push(e,"7d67ff44IpE/5UwxM3x1UNv","PackItem");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,c=a.ccclass,s=a.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.listBox=null,e.listBoxBg=null,e.icon=null,e.title=null,e.boxObj={},e}return i(e,t),e.prototype.onLoad=function(){this.listBox.on("touchstart",this.onListBox,this,!0),this.listBox.on("touchend",this.onListBoxOver,this,!0)},e.prototype.setImage=function(t,e){cc.resources.load(e,cc.SpriteFrame,function(e,o){t.spriteFrame=o})},e.prototype.initBox=function(t){this.boxObj=t,this.setImage(this.icon,t.url),this.title.string="x"+t.payCount},e.prototype.onListBox=function(){this.setImage(this.listBoxBg,"images/d2")},e.prototype.onListBoxOver=function(){this.setImage(this.listBoxBg,"images/d1")},r([s(cc.Node)],e.prototype,"listBox",void 0),r([s(cc.Sprite)],e.prototype,"listBoxBg",void 0),r([s(cc.Sprite)],e.prototype,"icon",void 0),r([s(cc.Label)],e.prototype,"title",void 0),r([c],e)}(cc.Component);o.default=l,cc._RF.pop()},{}],PackView:[function(t,e,o){"use strict";cc._RF.push(e,"fc991HPfOdM0K/C4Sln24zj","PackView");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a},a=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(i,r){function a(t){try{s(n.next(t))}catch(e){r(e)}}function c(t){try{s(n.throw(t))}catch(e){r(e)}}function s(t){var e;t.done?i(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,c)}s((n=n.apply(t,e||[])).next())})},c=this&&this.__generator||function(t,e){var o,n,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function c(t){return function(e){return s([t,e])}}function s(r){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,n=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(c){r=[6,c],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s=t("./model/State"),l=cc._decorator,u=l.ccclass,p=l.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.goBack=null,e.listBox=null,e.scrollView=null,e.fucList=null,e.fucBox=null,e.emptyBox=null,e.nav1=null,e.nav2=null,e.sellEmptyBox=null,e.sellScrollView=null,e.tips=null,e.longTapBox=null,e.giveModel=null,e.sellModel=null,e.mask=null,e.sellListBox=null,e.activeIndex=1,e.tapTime=0,e.moveIcon=null,e.moveIndex=-1,e.moveCancel=0,e.moveTargetIndex=-1,e}return i(e,t),e.prototype.onLoad=function(){return a(this,void 0,void 0,function(){var t=this;return c(this,function(e){switch(e.label){case 0:return this.goBack.on("touchstart",this.onGoBack,this),[4,s.default.ins().getList()];case 1:return e.sent(),[4,this.judgeEmpty()];case 2:return e.sent(),this.nav1.on("touchstart",function(){return t.onNav(1)},this),this.nav2.on("touchstart",function(){return t.onNav(2)},this),this.tips.getChildByName("tipsClose").on("touchstart",function(){t.tips.active=!1,localStorage.setItem("packTips","false")},this),[2]}})})},e.prototype.judgeEmpty=function(){return a(this,void 0,void 0,function(){return c(this,function(t){switch(t.label){case 0:return this.scrollView.content.active=!1,this.emptyBox.active=!1,this.sellScrollView.content.active=!1,this.sellEmptyBox.active=!1,this.fucList.active=!1,this.tips.active=!1,1!==this.activeIndex?[3,5]:[4,this.renderScrollView()];case 1:return t.sent(),this.scrollView.content.children.length>0?(this.scrollView.content.active=!0,[4,this.renderFucList()]):[3,3];case 2:return t.sent(),this.tips.active="false"!==localStorage.getItem("packTips"),this.fucList.active=!0,[3,4];case 3:this.emptyBox.active=!0,this.emptyBox.getChildByName("goStore").on("touchstart",function(){cc.director.loadScene("store")},this),t.label=4;case 4:return[3,7];case 5:return[4,this.renderSellScrollView()];case 6:t.sent(),this.sellScrollView.content.children.length>0?this.sellScrollView.content.active=!0:this.sellEmptyBox.active=!0,t.label=7;case 7:return[2]}})})},e.prototype.onNav=function(t){this.activeIndex=t,this["nav"+t].getChildByName("navLabel").opacity=204,this["nav"+t].getChildByName("navActive").active=!0;var e=3-t;this["nav"+e].getChildByName("navLabel").opacity=153,this["nav"+e].getChildByName("navActive").active=!1,this.judgeEmpty()},e.prototype.renderScrollView=function(){var t=this,e=this.scrollView.content;e.removeAllChildren(),s.default.ins().imageList.forEach(function(o,n){if(0!==o.payCount&&-1===o.sort){var i=cc.instantiate(t.listBox);e.addChild(i),i.getComponent("PackItem").initBox(o),i.on("touchstart",function(e){t.longTapBox.active=!1,t.scheduleOnce(function(){t.longTap(e,i,n)},1),7!==o.type&&t.ontouchstart(e,i,n)},t,!0),7!==o.type&&(i.on("touchmove",function(e){t.unscheduleAllCallbacks(),t.onTouchmove(e)},t,!0),i.on("touchcancel",function(){t.unscheduleAllCallbacks(),t.onTouchcancel(1)},t,!0),cc.director.getScene().getChildByName("Canvas").on("touchend",function(){t.unscheduleAllCallbacks(),t.removeMoveBox()},t,!0))}})},e.prototype.longTap=function(t,e,o){var n=this,i=t.target.x,r=t.target.y,a=t.target.width,c=t.target.height,s=this.longTapBox.getBoundingBox(),l=s.width,u=i+l/2-a/2,p=r+525.5-s.height/2-c/2,h=this.longTapBox.getChildByName("tips");h.setPosition(-90,96.104),u>300&&(u=u-l+a,h.setPosition(90,96.104)),this.longTapBox.setPosition(u,p),this.longTapBox.active=!0,this.longTapBox.getChildByName("give").on("touchstart",function(){n.longTapBox.active=!1,n.showGiveModel(e,o)},this),this.longTapBox.getChildByName("sell").once("touchstart",function(){n.longTapBox.active=!1,n.showSellModel(e,o)},this)},e.prototype.showGiveModel=function(t,e){var o=this;this.giveModel.getChildByName("icon").getComponent(cc.Sprite).spriteFrame=t.getChildByName("icon").getComponent(cc.Sprite).spriteFrame,this.giveModel.getChildByName("iconTitleBox").getChildByName("iconTitle").getComponent(cc.Label).string=s.default.ins().imageList[e].title,this.giveModel.active=!0,this.mask.active=!0;var n=this.giveModel.getChildByName("inputContext").getChildByName("inputBox").getComponent(cc.EditBox),i="";n.node.on("text-changed",function(t){i=t.string,o.giveModel.getChildByName("submit").getChildByName("title").opacity=i?255:88},this),this.giveModel.getChildByName("close").on("touchstart",function(){o.giveModel.active=!1,o.mask.active=!1},this),this.giveModel.getChildByName("submit").on("touchstart",function(){i&&s.default.ins().mainNear.contract.nft_transfer({receiver_id:i,token_id:s.default.ins().imageList[e].payList.splice(0,1)[0].token_id},3e14,window.nearApi.utils.format.parseNearAmount("0.000000000000000000000001"))},this)},e.prototype.showSellModel=function(t,e){var o=this;this.sellModel.getChildByName("icon").getComponent(cc.Sprite).spriteFrame=t.getChildByName("icon").getComponent(cc.Sprite).spriteFrame,this.sellModel.getChildByName("iconTitleBox").getChildByName("iconTitle").getComponent(cc.Label).string=s.default.ins().imageList[e].title,this.sellModel.active=!0,this.mask.active=!0,this.sellModel.getChildByName("close").on("touchstart",function(){o.sellModel.active=!1,o.mask.active=!1},this),this.sellModel.getChildByName("submit").on("touchstart",function(){var t=s.default.ins().imageList[e].payList.splice(0,1)[0];s.default.ins().mainNear.contract.nft_approve({account_id:s.default.ins().storeNearConfig.contractName,token_id:t.token_id,msg:JSON.stringify({sale_conditions:{near:window.nearApi.utils.format.parseNearAmount("1"),token_type:t.token_id.split(":")[0],is_auction:"false"}})},3e14,window.nearApi.utils.format.parseNearAmount("0.00051"))},this)},e.prototype.renderSellScrollView=function(){return a(this,void 0,void 0,function(){var t,e,o,n,i,r,l=this;return c(this,function(u){switch(u.label){case 0:return(t=this.scrollView.content).removeAllChildren(),e=0,o=[],[4,(n=function(){return a(l,void 0,void 0,function(){var t;return c(this,function(i){switch(i.label){case 0:return[4,s.default.ins().storeNear.contract.get_sales_by_owner_id({account_id:s.default.ins().storeNear.ownerKey,from_index:e.toString(),limit:80})];case 1:return t=i.sent(),o=o.concat(t),0!==e&&0===t.length?[2,o]:(e+=80,[2,n()])}})})})()];case 1:return u.sent(),i={},o.forEach(function(t){var e=t.token_id.split(":")[0];i[e]?i[e]+=1:i[e]=1}),r=Object.keys(i),s.default.ins().imageList.concat().forEach(function(e){if(r.includes(e.type.toString())){var o=cc.instantiate(l.sellListBox);t.addChild(o)}}),[2]}})})},e.prototype.ontouchstart=function(t,e,o){return a(this,void 0,void 0,function(){return c(this,function(){return this.moveIcon=cc.instantiate(e.getChildByName("icon")),cc.director.getScene().addChild(this.moveIcon),this.onTouchmove(t),this.moveIndex=o,[2]})})},e.prototype.onTouchmove=function(t){var e=this,o=t.getLocation(),n=t.getDelta();this.moveIcon.setPosition(o.x+n.x,o.y+n.y),this.moveTargetIndex=-1;var i=this.moveIcon.getBoundingBox();this.fucList.children.forEach(function(t,o){cc.Intersection.rectRect(i,t.getBoundingBox())&&(e.moveTargetIndex=o)})},e.prototype.onTouchcancel=function(t){return void 0===t&&(t=1),a(this,void 0,void 0,function(){var e=this;return c(this,function(){return this.moveCancel+=t,-1!==this.moveTargetIndex?(this.moveCancel=0,this.removeMoveBox(),s.default.ins().imageList.forEach(function(t){t.sort===e.moveTargetIndex&&(t.sort=-1)}),s.default.ins().imageList[this.moveIndex].sort=this.moveTargetIndex,localStorage.setItem("imageList",JSON.stringify(s.default.ins().imageList)),this.renderFucList(),this.renderScrollView()):2===this.moveCancel&&(s.default.ins().imageList[this.moveIndex].sort=this.moveTargetIndex,localStorage.setItem("imageList",JSON.stringify(s.default.ins().imageList)),this.removeMoveBox()),[2]})})},e.prototype.removeMoveBox=function(){cc.director.getScene().removeChild(this.moveIcon),this.moveCancel=0},e.prototype.renderFucList=function(){return a(this,void 0,void 0,function(){var t=this;return c(this,function(){return this.fucList&&this.fucList.removeAllChildren(),new Array(4).fill(1).map(function(e,o){var n=cc.instantiate(t.fucBox);n.getChildByName("default").getChildByName("index").getComponent(cc.Label).string=(o+1).toString(),t.fucList.addChild(n)}),s.default.ins().imageList.forEach(function(e,o){if(e.sort>=0&&e.payCount>0){var n=t.fucList.children[e.sort],i=n.getChildByName("default"),r=n.getChildByName("set"),a=r.getChildByName("icon").getComponent(cc.Sprite);r.getChildByName("countBox").getChildByName("count").getComponent(cc.Label).string="x "+s.default.ins().imageList[o].payCount,i.active=!1,r.active=!0,cc.resources.load(e.url,cc.SpriteFrame,function(t,e){a.spriteFrame=e});var c=cc.instantiate(t.listBox);c.getComponent("PackItem").initBox(e),n.on("touchstart",function(e){t.longTapBox.active=!1,t.ontouchstart(e,c,o)},t,!0),n.on("touchmove",t.onTouchmove,t,!0),n.on("touchcancel",function(){t.onTouchcancel(2),-1===t.moveTargetIndex&&(s.default.ins().imageList[o].sort=-1,t.renderFucList(),t.renderScrollView())},t,!0),n.on("touchend",t.removeMoveBox,t,!0)}}),[2]})})},e.prototype.onGoBack=function(){cc.director.loadScene("main")},r([p(cc.Node)],e.prototype,"goBack",void 0),r([p(cc.Prefab)],e.prototype,"listBox",void 0),r([p(cc.ScrollView)],e.prototype,"scrollView",void 0),r([p(cc.Node)],e.prototype,"fucList",void 0),r([p(cc.Prefab)],e.prototype,"fucBox",void 0),r([p(cc.Node)],e.prototype,"emptyBox",void 0),r([p(cc.Node)],e.prototype,"nav1",void 0),r([p(cc.Node)],e.prototype,"nav2",void 0),r([p(cc.Node)],e.prototype,"sellEmptyBox",void 0),r([p(cc.ScrollView)],e.prototype,"sellScrollView",void 0),r([p(cc.Node)],e.prototype,"tips",void 0),r([p(cc.Node)],e.prototype,"longTapBox",void 0),r([p(cc.Node)],e.prototype,"giveModel",void 0),r([p(cc.Node)],e.prototype,"sellModel",void 0),r([p(cc.Node)],e.prototype,"mask",void 0),r([p(cc.Prefab)],e.prototype,"sellListBox",void 0),r([u],e)}(cc.Component);o.default=h,cc._RF.pop()},{"./model/State":"State"}],RandomUtil:[function(t,e,o){"use strict";cc._RF.push(e,"9dcebZ21S1CcoCfjaM6tclf","RandomUtil");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.RandomUtil=o.RandomSeedType=void 0;var r,a=t("../base/SingletonClass");(function(t){t[t.UNDEFINED=0]="UNDEFINED"})(r=o.RandomSeedType||(o.RandomSeedType={}));var c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._seeds=[],e._seedIndex=[],e._selectedIndexes=[],e._randomSeed="0123456789abcdef",e}return i(e,t),e.ins=function(){return t.ins.call(this)},e.prototype.init=function(t){void 0===t&&(t="0123456789abcdef"),this._randomSeed=t,this._seeds=[],this._selectedIndexes=[],this._seedIndex=[];for(var e=0,o=[0,1,2,3,4,5,6,7,8,9,10];e<o.length;e++){var n=o[e];this.resetSeed(n)}},e.prototype.resetSeed=function(t){this._seeds[t]=[],this._selectedIndexes[t]=[],this._seedIndex[t]=0;for(var e=0;e<this._randomSeed.length;e++){var o=parseInt(this._randomSeed[e],36)||0;o=(9301*o+49297)%10485763||0,this._seeds[t].push(o)}},e.prototype.randomNum=function(t,e,o){void 0===o&&(o=r.UNDEFINED),t>e&&(e=t);var n=this._seedIndex[o]%this._randomSeed.length,i=t+this._seeds[o][n]%(e-t+1);return this._seeds[o][n]=(9301*this._seeds[o][n]+49297)%10485763||0,this._seedIndex[o]++,this._selectedIndexes[o].push(i),i},e.prototype.randomNumArray=function(t,e,o,n){void 0===n&&(n=r.UNDEFINED),t>e&&(e=t);var i=[];e-t+1<o&&(o=e-t+1);for(var a=0;a<o;){var c=this.randomNum(t,e,n);i.indexOf(c)<0&&(i.push(c),a++)}return i},e.prototype.getPercentProbability=function(t,e){return void 0===e&&(e=r.UNDEFINED),t>=this.randomNum(1,100,e)},e}(a.default);o.RandomUtil=c,cc._RF.pop()},{"../base/SingletonClass":"SingletonClass"}],SingletonClass:[function(t,e,o){"use strict";cc._RF.push(e,"67b6bxkrdtJJph7b4mJgN8P","SingletonClass"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function t(){}return t.ins=function(){return this._ins||(this._ins=new this),this._ins},t}();o.default=n,cc._RF.pop()},{}],State:[function(t,e,o){"use strict";cc._RF.push(e,"fc8342e0DJGy6/8uxRlqj50","State");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__assign||function(){return(r=Object.assign||function(t){for(var e,o=1,n=arguments.length;o<n;o++)for(var i in e=arguments[o])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},a=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(i,r){function a(t){try{s(n.next(t))}catch(e){r(e)}}function c(t){try{s(n.throw(t))}catch(e){r(e)}}function s(t){var e;t.done?i(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,c)}s((n=n.apply(t,e||[])).next())})},c=this&&this.__generator||function(t,e){var o,n,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function c(t){return function(e){return s([t,e])}}function s(r){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,n=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(c){r=[6,c],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.imageList=[{type:6,url:"images/a1",title:"\u6e05\u4e00\u884c",price:"10",payCount:0,payList:[],time:.3,maxCount:0,sort:-1},{type:1,url:"images/a2",title:"\u51bb\u5168\u5c4f",price:"10",payCount:0,payList:[],time:10,maxCount:0,sort:-1},{type:2,url:"images/a3",title:"\u4e24\u500d\u901f",price:"10",payCount:0,payList:[],time:10,maxCount:0,sort:-1},{type:3,url:"images/a4",title:"\u4e09\u500d\u901f",price:"10",payCount:0,payList:[],time:10,maxCount:0,sort:-1},{type:4,url:"images/a5",title:"\u4e94\u500d\u901f",price:"10",payCount:0,payList:[],time:10,maxCount:0,sort:-1},{type:5,url:"images/a6",title:"\u6e05\u5168\u5c4f",price:"10",payCount:0,payList:[],time:1,maxCount:0,sort:-1},{type:7,url:"images/a7",title:"\u590d\u6d3b",price:"10",payCount:0,payList:[],time:0,maxCount:0,sort:-1}],e.isLogin=!1,e.isPay=!1,e.mianNearConfig={networkId:"testnet",contractName:"dev-1632965307540-55511993444317",nodeUrl:"https://rpc.testnet.near.org",walletUrl:"https://wallet.testnet.near.org",helperUrl:"https://helper.testnet.near.org"},e.mainNear={near:{},walletAccount:{},contract:{},ownerKey:"",poolBalance:0,maxScore:0,balance:0},e.storeNearConfig=r(r({},e.mianNearConfig),{contractName:"market."+e.mianNearConfig.contractName}),e.storeNear={near:{},walletAccount:{},contract:{},ownerKey:"",poolBalance:0,maxScore:0,balance:0},e}return i(e,t),e.ins=function(){return t.ins.call(this)},e.prototype.resetImageList=function(){this.imageList=[{type:6,url:"images/a1",title:"\u6e05\u4e00\u884c",price:"10",payCount:0,payList:[],time:.3,maxCount:0,sort:-1},{type:1,url:"images/a2",title:"\u51bb\u5168\u5c4f",price:"10",payCount:0,payList:[],time:10,maxCount:0,sort:-1},{type:2,url:"images/a3",title:"\u4e24\u500d\u901f",price:"10",payCount:0,payList:[],time:10,maxCount:0,sort:-1},{type:3,url:"images/a4",title:"\u4e09\u500d\u901f",price:"10",payCount:0,payList:[],time:10,maxCount:0,sort:-1},{type:4,url:"images/a5",title:"\u4e94\u500d\u901f",price:"10",payCount:0,payList:[],time:10,maxCount:0,sort:-1},{type:5,url:"images/a6",title:"\u6e05\u5168\u5c4f",price:"10",payCount:0,payList:[],time:1,maxCount:0,sort:-1},{type:7,url:"images/a7",title:"\u590d\u6d3b",price:"10",payCount:0,payList:[],time:0,maxCount:0,sort:-1}]},e.prototype.getList=function(){return a(this,void 0,void 0,function(){var t,o;return c(this,function(n){switch(n.label){case 0:return[4,e.ins().mainNear.contract.nft_tokens_for_owner({account_id:e.ins().mainNear.ownerKey,from_index:"0",limit:1e5})];case 1:return t=n.sent(),e.ins().resetImageList(),e.ins().isLogin&&localStorage.getItem("imageList")&&JSON.parse(localStorage.getItem("imageList")).forEach(function(t,o){e.ins().imageList[o].sort=t.sort}),o=function(t){var e=t;switch(t){case 7:e=6;break;case 6:e=0}return e},t.forEach(function(t){var n=t.token_id.split(":"),i=o(Number(n[0]));e.ins().imageList[i].payCount++,e.ins().imageList[i].payList.push(t)}),localStorage.setItem("imageList",JSON.stringify(e.ins().imageList)),[2]}})})},e.prototype.init=function(){},e}(t("../../common/base/SingletonClass").default);o.default=s,cc._RF.pop()},{"../../common/base/SingletonClass":"SingletonClass"}],StoreItem:[function(t,e,o){"use strict";cc._RF.push(e,"7a0ebyzXRNE+rztH+BgiUFx","StoreItem");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("./common/Common"),c=t("./model/State"),s=cc._decorator,l=s.ccclass,u=s.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.listBox=null,e.listBoxBg=null,e.icon=null,e.title=null,e.submitButton=null,e.submitButtonBg=null,e.submitTitle=null,e.storePay=null,e.boxObj={},e}return i(e,t),e.prototype.onLoad=function(){this.submitButton.on("touchstart",this.onSubmitButton,this)},e.prototype.setImage=function(t,e){cc.resources.load(e,cc.SpriteFrame,function(e,o){t.spriteFrame=o})},e.prototype.initBox=function(t){this.boxObj=t,this.setImage(this.icon,t.url),this.title.string=t.title,this.submitTitle.string=a.formatPrice(t.price,2,!0)+" Near"},e.prototype.onListBox=function(){this.setImage(this.listBoxBg,"images/b2"),this.setImage(this.submitButtonBg,"images/c2"),this.submitTitle.node.color=cc.Color.WHITE},e.prototype.onListBoxOver=function(){this.setImage(this.listBoxBg,"images/b1"),this.setImage(this.submitButtonBg,"images/c1"),this.submitTitle.node.color=cc.color(255,217,79)},e.prototype.onSubmitButton=function(){c.default.ins().storePayBox=cc.instantiate(this.storePay),cc.director.getScene().getChildByName("Canvas").addChild(c.default.ins().storePayBox),c.default.ins().storePayBox.getComponent("StorePay").initBox(this.boxObj)},r([u(cc.Node)],e.prototype,"listBox",void 0),r([u(cc.Sprite)],e.prototype,"listBoxBg",void 0),r([u(cc.Sprite)],e.prototype,"icon",void 0),r([u(cc.Label)],e.prototype,"title",void 0),r([u(cc.Node)],e.prototype,"submitButton",void 0),r([u(cc.Sprite)],e.prototype,"submitButtonBg",void 0),r([u(cc.Label)],e.prototype,"submitTitle",void 0),r([u(cc.Prefab)],e.prototype,"storePay",void 0),r([l],e)}(cc.Component);o.default=p,cc._RF.pop()},{"./common/Common":"Common","./model/State":"State"}],StorePay:[function(t,e,o){"use strict";cc._RF.push(e,"4e35eTB3FJIIKGZFEaWdkLg","StorePay");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a},a=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(i,r){function a(t){try{s(n.next(t))}catch(e){r(e)}}function c(t){try{s(n.throw(t))}catch(e){r(e)}}function s(t){var e;t.done?i(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,c)}s((n=n.apply(t,e||[])).next())})},c=this&&this.__generator||function(t,e){var o,n,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function c(t){return function(e){return s([t,e])}}function s(r){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,n=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(c){r=[6,c],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s=t("./common/Common"),l=t("./model/State"),u=cc._decorator,p=u.ccclass,h=u.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.maskBox=null,e.mask=null,e.closeButton=null,e.icon=null,e.title=null,e.price=null,e.delButton=null,e.count=null,e.addButton=null,e.totalPrice=null,e.buyButton=null,e._count=1,e._totalPrice=0,e.boxObj=null,e}return i(e,t),e.prototype.onLoad=function(){this.closeButton.on("touchstart",this.onClose,this),this.buyButton.on("touchstart",this.onBuy,this),this.mask.on("touchstart",function(t){t.stopPropagation()},this)},e.prototype.setImage=function(t,e){cc.resources.load(e,cc.SpriteFrame,function(e,o){t.spriteFrame=o})},e.prototype.initBox=function(t){this.boxObj=t,this.maskBox.active=!0,this.setImage(this.icon,t.url),this.title.string=t.title,this.price.string=s.formatPrice(t.price,2,!0)+" Near",this.watchCount()},e.prototype.watchCount=function(){this.count.string=this._count.toString(),this._totalPrice=this._count*Number(this.boxObj.price),this.totalPrice.string=s.formatPrice(this._totalPrice,2,!0)+" Near"},e.prototype.onClose=function(){this.maskBox.active=!1,cc.director.getScene().getChildByName("Canvas").removeChild(l.default.ins().storePayBox)},e.prototype.onBuy=function(){return a(this,void 0,void 0,function(){return c(this,function(){return l.default.ins().storeNear.contract.offer({nft_contract_id:l.default.ins().storePayObj.nft_contract_id,token_id:l.default.ins().storePayObj.token_id},3e14,window.nearApi.utils.format.parseNearAmount(this._totalPrice.toString())),[2]})})},r([h(cc.Node)],e.prototype,"maskBox",void 0),r([h(cc.Node)],e.prototype,"mask",void 0),r([h(cc.Node)],e.prototype,"closeButton",void 0),r([h(cc.Sprite)],e.prototype,"icon",void 0),r([h(cc.Label)],e.prototype,"title",void 0),r([h(cc.Label)],e.prototype,"price",void 0),r([h(cc.Node)],e.prototype,"delButton",void 0),r([h(cc.Label)],e.prototype,"count",void 0),r([h(cc.Node)],e.prototype,"addButton",void 0),r([h(cc.Label)],e.prototype,"totalPrice",void 0),r([h(cc.Node)],e.prototype,"buyButton",void 0),r([p],e)}(cc.Component);o.default=d,cc._RF.pop()},{"./common/Common":"Common","./model/State":"State"}],StoreView:[function(t,e,o){"use strict";cc._RF.push(e,"b64feD5RaFByazI2cLilej5","StoreView");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a},a=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(i,r){function a(t){try{s(n.next(t))}catch(e){r(e)}}function c(t){try{s(n.throw(t))}catch(e){r(e)}}function s(t){var e;t.done?i(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(a,c)}s((n=n.apply(t,e||[])).next())})},c=this&&this.__generator||function(t,e){var o,n,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function c(t){return function(e){return s([t,e])}}function s(r){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,n=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(c){r=[6,c],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s=window.nearApi,l=s.WalletAccount,u=s.keyStores,p=s.connect,h=s.Contract,d=t("./model/State"),_=cc._decorator,f=_.ccclass,m=_.property,y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.goBack=null,e.listBox=null,e.scrollView=null,e.nav1=null,e.nav2=null,e.emptyBox=null,e.listBoxArr=[],e.typeObj={},e.typeDealObj={},e.resultMap=[],e.resultDealMap=[],e.activeIndex=1,e}return i(e,t),e.prototype.onLoad=function(){this.goBack.on("touchstart",this.onGoBack,this),this.initScrollView()},e.prototype.initScrollView=function(){return a(this,void 0,void 0,function(){var t,e,o,n,i=this;return c(this,function(r){switch(r.label){case 0:return t=d.default.ins().storeNear,[4,p(Object.assign(d.default.ins().storeNearConfig,{deps:{keyStore:new u.BrowserLocalStorageKeyStore}}))];case 1:return t.near=r.sent(),d.default.ins().storeNear.walletAccount=new l(d.default.ins().storeNear.near),d.default.ins().storeNear.contract=new h(d.default.ins().storeNear.walletAccount.account(),d.default.ins().storeNearConfig.contractName,{viewMethods:["get_sales","get_sales_by_owner_id"],changeMethods:["offer"],sender:d.default.ins().storeNear.walletAccount.account()}),d.default.ins().storeNear.ownerKey=d.default.ins().storeNear.walletAccount.getAccountId(),e=0,o=[],[4,(n=function(){return a(i,void 0,void 0,function(){var t;return c(this,function(i){switch(i.label){case 0:return[4,d.default.ins().storeNear.contract.get_sales({from_index:e.toString(),limit:80..toString()})];case 1:return t=i.sent(),o=o.concat(t),0!==e&&0===t.length?[2,o]:(e+=80,[2,n()])}})})})()];case 2:return r.sent(),this.typeObj={},this.typeDealObj={},this.resultMap=[],this.resultDealMap=[],o.forEach(function(t){var e=t.token_id.split(":")[0];"nftball.testnet"===t.owner_id?(i.resultMap[e]||(i.resultMap[e]=[]),i.resultMap[e].push(t),i.typeObj[e]?i.typeObj[e]+=1:i.typeObj[e]=1):(i.resultDealMap[e]||(i.resultDealMap[e]=[]),i.resultDealMap[e].push(t),i.typeDealObj[e]?i.typeDealObj[e]+=1:i.typeDealObj[e]=1)}),[4,this.renderDefault()];case 3:return r.sent(),[4,this.judgeEmpty()];case 4:return r.sent(),this.nav1.on("touchstart",function(){return i.onNav(1)},this),this.nav2.on("touchstart",function(){return i.onNav(2)},this),[2]}})})},e.prototype.renderDefault=function(){var t=this;this.scrollView.content.removeAllChildren();var e=Object.keys(this.typeObj);d.default.ins().imageList.forEach(function(o,n){if(e.includes(o.type.toString())){o.maxCount=t.typeObj[o.type],o.price=(t.resultMap[o.type][0].conditions.near/1e24).toString();var i=cc.instantiate(t.listBox);t.scrollView.content.addChild(i),i.getComponent("StoreItem").initBox(o),t.listBoxArr.push(i),i.on("touchstart",function(){d.default.ins().storePayObj=t.resultMap[o.type][0],d.default.ins().storePayIndex=n,t.switchListBox(i)})}})},e.prototype.renderDeal=function(){var t=this;this.scrollView.content.removeAllChildren();var e=Object.keys(this.typeDealObj);d.default.ins().imageList.concat().forEach(function(o,n){if(e.includes(o.type.toString())){o.price=(t.resultDealMap[o.type][0].conditions.near/1e24).toString();var i=cc.instantiate(t.listBox);t.scrollView.content.addChild(i),i.getComponent("StoreItem").initBox(o),t.listBoxArr.push(i),i.on("touchstart",function(){d.default.ins().storePayObj=t.resultDealMap[o.type][0],d.default.ins().storePayIndex=n,t.switchListBox(i)})}})},e.prototype.switchListBox=function(t){this.listBoxArr.forEach(function(e){e.getComponent("StoreItem").onListBoxOver(),e===t&&e.getComponent("StoreItem").onListBox()})},e.prototype.onGoBack=function(){cc.director.loadScene("main")},e.prototype.onNav=function(t){this.activeIndex=t,this["nav"+t].getChildByName("navLabel").opacity=204,this["nav"+t].getChildByName("navActive").active=!0;var e=3-t;this["nav"+e].getChildByName("navLabel").opacity=153,this["nav"+e].getChildByName("navActive").active=!1,this.judgeEmpty()},e.prototype.judgeEmpty=function(){1===this.activeIndex?(this.renderDefault(),this.emptyBox.getChildByName("title").getComponent(cc.Label).string="\u5f53\u524d\u6682\u65e0\u5546\u57ce\u9053\u5177"):(this.renderDeal(),this.emptyBox.getChildByName("title").getComponent(cc.Label).string="\u5f53\u524d\u6682\u65e0C2C\u9053\u5177"),this.emptyBox.active=0===this.scrollView.content.children.length},r([m(cc.Node)],e.prototype,"goBack",void 0),r([m(cc.Prefab)],e.prototype,"listBox",void 0),r([m(cc.ScrollView)],e.prototype,"scrollView",void 0),r([m(cc.Node)],e.prototype,"nav1",void 0),r([m(cc.Node)],e.prototype,"nav2",void 0),r([m(cc.Node)],e.prototype,"emptyBox",void 0),r([f],e)}(cc.Component);o.default=y,cc._RF.pop()},{"./model/State":"State"}],Tween:[function(t,e,o){"use strict";cc._RF.push(e,"28890U/NmdCwqWMUik18OnQ","Tween"),Object.defineProperty(o,"__esModule",{value:!0}),o.Ease=o.Tween=void 0;var n=t("../timer/timer_mgr"),i=t("../util"),r=function(){function t(t,e,o){this._target=null,this._useTicks=!1,this.ignoreGlobalPause=!1,this.loop=!1,this.pluginData=null,this._steps=null,this.paused=!1,this.duration=0,this._prevPos=-1,this.position=null,this._prevPosition=0,this._stepPosition=0,this.passive=!1,this.initialize(t,e,o)}return t.get=function(e,o,n,i){return void 0===n&&(n=null),void 0===i&&(i=!1),i&&t.removeTweens(e),new t(e,o,n)},t.removeTweens=function(e){if(e.tween_count){for(var o=t._tweens,n=o.length-1;n>=0;n--)o[n]._target==e&&(o[n].paused=!0,o.splice(n,1));e.tween_count=0}},t.pauseTweens=function(e){if(e.tween_count)for(var o=t._tweens,n=o.length-1;n>=0;n--)o[n]._target==e&&(o[n].paused=!0)},t.resumeTweens=function(e){if(e.tween_count)for(var o=t._tweens,n=o.length-1;n>=0;n--)o[n]._target==e&&(o[n].paused=!1)},t.tick=function(e,o){void 0===o&&(o=!1);for(var n=t._tweens.concat(),i=n.length-1;i>=0;i--){var r=n[i];o&&!r.ignoreGlobalPause||r.paused||r.$tick(r._useTicks?1:e)}},t._register=function(e,o){var r=e._target,a=t._tweens;if(o)r&&(r.tween_count=r.tween_count>0?r.tween_count+1:1),a.push(e),t._inited||(t._inited=!0,n.TimerMgr.getInst().add_updater(i.gen_handler(function(e){t.tick(1e3*e)})));else{r&&r.tween_count--;for(var c=a.length;c--;)if(a[c]==e)return void a.splice(c,1)}},t.removeAllTweens=function(){for(var e=t._tweens,o=0,n=e.length;o<n;o++){var i=e[o];i.paused=!0,i._target.tween_count=0}e.length=0},t.prototype.initialize=function(e,o,n){this._target=e,o&&(this._useTicks=o.useTicks,this.ignoreGlobalPause=o.ignoreGlobalPause,this.loop=o.loop,this.onChange=o.onChange,this.onChangeObj=o.onChangeObj,o.override&&t.removeTweens(e)),this.pluginData=n||{},this._curQueueProps={},this._initQueueProps={},this._steps=[],o&&o.paused?this.paused=!0:t._register(this,!0),o&&null!=o.position&&this.setPosition(o.position,t.NONE)},t.prototype.setPosition=function(t,e){void 0===e&&(e=1),t<0&&(t=0);var o=t,n=!1;if(o>=this.duration)if(this.loop){var i=o%this.duration;o=o>0&&0===i?this.duration:i}else o=this.duration,n=!0;if(o==this._prevPos)return n;n&&this.setPaused(!0);var r=this._prevPos;if(this.position=this._prevPos=o,this._prevPosition=t,this._target&&this._steps.length>0){for(var a=this._steps.length,c=-1,s=0;s<a&&!("step"==this._steps[s].type&&(c=s,this._steps[s].t<=o&&this._steps[s].t+this._steps[s].d>=o));s++);for(s=0;s<a;s++)if("action"==this._steps[s].type)0!=e&&(this._useTicks?this._runAction(this._steps[s],o,o):1==e&&o<r?(r!=this.duration&&this._runAction(this._steps[s],r,this.duration),this._runAction(this._steps[s],0,o,!0)):this._runAction(this._steps[s],r,o));else if("step"==this._steps[s].type&&c==s){var l=this._steps[c];this._updateTargetProps(l,Math.min((this._stepPosition=o-l.t)/l.d,1))}}return this.onChange&&this.onChange.call(this.onChangeObj),n},t.prototype._runAction=function(t,e,o,n){void 0===n&&(n=!1);var i=e,r=o;e>o&&(i=o,r=e);var a=t.t;(a==r||a>i&&a<r||n&&a==e)&&t.f.apply(t.o,t.p)},t.prototype._updateTargetProps=function(e,o){var n,i,r,a,c,s;if(e||1!=o){if(this.passive=!!e.v,this.passive)return;e.e&&(o=e.e(o,0,1,1)),n=e.p0,i=e.p1}else this.passive=!1,n=i=this._curQueueProps;for(var l in this._initQueueProps){null==(a=n[l])&&(n[l]=a=this._initQueueProps[l]),null==(c=i[l])&&(i[l]=c=a),r=a==c||0==o||1==o||"number"!=typeof a?1==o?c:a:a+(c-a)*o;var u=!1;if(s=t._plugins[l])for(var p=0,h=s.length;p<h;p++){var d=s[p].tween(this,l,r,n,i,o,!!e&&n==i,!e);d==t.IGNORE?u=!0:r=d}u||(this._target[l]=r)}},t.prototype.setPaused=function(e){return this.paused==e?this:(this.paused=e,t._register(this,!e),this)},t.prototype._cloneProps=function(t){var e={};for(var o in t)e[o]=t[o];return e},t.prototype._addStep=function(t){return t.d>0&&(t.type="step",this._steps.push(t),t.t=this.duration,this.duration+=t.d),this},t.prototype._appendQueueProps=function(e){var o,n,i,r,a;for(var c in e)if(void 0===this._initQueueProps[c]){if(n=this._target[c],o=t._plugins[c])for(i=0,r=o.length;i<r;i++)n=o[i].init(this,c,n);this._initQueueProps[c]=this._curQueueProps[c]=void 0===n?null:n}else n=this._curQueueProps[c];for(var c in e){if(n=this._curQueueProps[c],o=t._plugins[c])for(a=a||{},i=0,r=o.length;i<r;i++)o[i].step&&o[i].step(this,c,n,e[c],a);this._curQueueProps[c]=e[c]}return a&&this._appendQueueProps(a),this._curQueueProps},t.prototype._addAction=function(t){return t.t=this.duration,t.type="action",this._steps.push(t),this},t.prototype._set=function(t,e){for(var o in t)e[o]=t[o]},t.prototype.wait=function(t,e){if(null==t||t<=0)return this;var o=this._cloneProps(this._curQueueProps);return this._addStep({d:t,p0:o,p1:o,v:e})},t.prototype.to=function(t,e,o){return void 0===o&&(o=void 0),(isNaN(e)||e<0)&&(e=0),this._addStep({d:e||0,p0:this._cloneProps(this._curQueueProps),e:o,p1:this._cloneProps(this._appendQueueProps(t))}),this.set(t)},t.prototype.call=function(t,e,o){return void 0===e&&(e=void 0),void 0===o&&(o=void 0),this._addAction({f:t,p:o||[],o:e||this._target})},t.prototype.set=function(t,e){return void 0===e&&(e=null),this._appendQueueProps(t),this._addAction({f:this._set,o:this,p:[t,e||this._target]})},t.prototype.play=function(t){return t||(t=this),this.call(t.setPaused,t,[!1])},t.prototype.pause=function(t){return t||(t=this),this.call(t.setPaused,t,[!0])},t.prototype.$tick=function(t){this.paused||this.setPosition(this._prevPosition+t)},t.NONE=0,t.LOOP=1,t.REVERSE=2,t._tweens=[],t.IGNORE={},t._plugins={},t._inited=!1,t._lastTime=0,t}();o.Tween=r;var a=function(){function t(){}return t.get=function(t){return t<-1&&(t=-1),t>1&&(t=1),function(e){return 0==t?e:t<0?e*(e*-t+1+t):e*((2-e)*t+(1-t))}},t.getPowIn=function(t){return function(e){return Math.pow(e,t)}},t.getPowOut=function(t){return function(e){return 1-Math.pow(1-e,t)}},t.getPowInOut=function(t){return function(e){return(e*=2)<1?.5*Math.pow(e,t):1-.5*Math.abs(Math.pow(2-e,t))}},t.sineIn=function(t){return 1-Math.cos(t*Math.PI/2)},t.sineOut=function(t){return Math.sin(t*Math.PI/2)},t.sineInOut=function(t){return-.5*(Math.cos(Math.PI*t)-1)},t.getBackIn=function(t){return function(e){return e*e*((t+1)*e-t)}},t.getBackOut=function(t){return function(e){return--e*e*((t+1)*e+t)+1}},t.getBackInOut=function(t){return t*=1.525,function(e){return(e*=2)<1?e*e*((t+1)*e-t)*.5:.5*((e-=2)*e*((t+1)*e+t)+2)}},t.circIn=function(t){return-(Math.sqrt(1-t*t)-1)},t.circOut=function(t){return Math.sqrt(1- --t*t)},t.circInOut=function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},t.bounceIn=function(e){return 1-t.bounceOut(1-e)},t.bounceOut=function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},t.bounceInOut=function(e){return e<.5?.5*t.bounceIn(2*e):.5*t.bounceOut(2*e-1)+.5},t.getElasticIn=function(t,e){var o=2*Math.PI;return function(n){if(0==n||1==n)return n;var i=e/o*Math.asin(1/t);return-t*Math.pow(2,10*(n-=1))*Math.sin((n-i)*o/e)}},t.getElasticOut=function(t,e){var o=2*Math.PI;return function(n){if(0==n||1==n)return n;var i=e/o*Math.asin(1/t);return t*Math.pow(2,-10*n)*Math.sin((n-i)*o/e)+1}},t.getElasticInOut=function(t,e){var o=2*Math.PI;return function(n){var i=e/o*Math.asin(1/t);return(n*=2)<1?t*Math.pow(2,10*(n-=1))*Math.sin((n-i)*o/e)*-.5:t*Math.pow(2,-10*(n-=1))*Math.sin((n-i)*o/e)*.5+1}},t.quadIn=t.getPowIn(2),t.quadOut=t.getPowOut(2),t.quadInOut=t.getPowInOut(2),t.cubicIn=t.getPowIn(3),t.cubicOut=t.getPowOut(3),t.cubicInOut=t.getPowInOut(3),t.quartIn=t.getPowIn(4),t.quartOut=t.getPowOut(4),t.quartInOut=t.getPowInOut(4),t.quintIn=t.getPowIn(5),t.quintOut=t.getPowOut(5),t.quintInOut=t.getPowInOut(5),t.backIn=t.getBackIn(1.7),t.backOut=t.getBackOut(1.7),t.backInOut=t.getBackInOut(1.7),t.elasticIn=t.getElasticIn(1,.3),t.elasticOut=t.getElasticOut(1,.3),t.elasticInOut=t.getElasticInOut(1,.3*1.5),t}();o.Ease=a,cc._RF.pop()},{"../timer/timer_mgr":"timer_mgr","../util":"util"}],linklist:[function(t,e,o){"use strict";cc._RF.push(e,"bdd09bYpc5GwI0jOASAzWlq","linklist"),Object.defineProperty(o,"__esModule",{value:!0}),o.LinkList=void 0;var n=function(){function t(){this._head=this._tail=null,this.pool=[]}return t.prototype.spawn_node=function(t,e){var o=this.pool.pop();return o?(o.key=t,o.data=e,o.next=null):o={key:t,data:e,next:null},o},Object.defineProperty(t.prototype,"head",{get:function(){return this._head},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tail",{get:function(){return this._tail},enumerable:!1,configurable:!0}),t.prototype.append=function(t,e){var o=this.spawn_node(t,e);return this._tail?(this._tail.next=o,this._tail=o):this._head=this._tail=o,o.key},t.prototype.remove=function(t){if(!t)return null;if(!this._head)return null;for(var e,o=this._head;o&&o.key!=t;)e=o,o=o.next;return o?(e?(e.next=o.next,o.next||(this._tail=e)):(this._head=o.next,o.next||(this._tail=null)),this.pool.push(o),o):null},t}();o.LinkList=n,cc._RF.pop()},{}],loader_mgr:[function(t,e,o){"use strict";cc._RF.push(e,"ef581f23+RGqbKbSbfR960u","loader_mgr"),Object.defineProperty(o,"__esModule",{value:!0}),o.loader_mgr=void 0;var n=function(){function t(){}return t.get_inst=function(){return t.inst||(t.inst=new t),t.inst},t.prototype.loadExternalAsset=function(t,e,o){var n=cc.loader.getRes(t);n?e.exec(n):cc.loader.load(o?{url:t,type:o}:t,function(o,n){o?cc.warn("loadExternalAsset error",t):e.exec(n)})},t.prototype.loadExternalAssets=function(t,e,o){var n={},i=[];if(t.forEach(function(t){var e=cc.loader.getRes(t);e?n[t]=e:i.push(t)}),0!=i.length){var r=[];i.forEach(function(t,e){o?r.push({url:t,type:o[e]}):r.push(t)}),cc.loader.load(r,function(t,o){cc.log("loadExternalAssets from remote url"),t?cc.warn("loadExternalAssets error",t):(i.forEach(function(t){n[t]=o.getContent(t)}),e.exec(n))})}else e.exec(n)},t.prototype.loadRawAsset=function(t,e){var o=cc.loader.getRes(t);o?e.exec(o):cc.loader.loadRes(t,function(o,n){o?cc.warn("loadRawAsset error",t):e.exec(n)})},t.prototype.loadAsset=function(t,e,o){var n=cc.loader.getRes(t,o);n?e.exec(n):cc.loader.loadRes(t,o,function(o,n){o?cc.warn("loadAsset error",t):e.exec(n)})},t.prototype.loadResArray=function(t,e){var o={},n=[];t.forEach(function(t){var e=cc.loader.getRes(t);e?o[t]=e:n.push(t)}),0!=n.length?cc.loader.loadResArray(n,function(t){t?cc.warn("loadResArray error",n):(n.forEach(function(t){o[t]=cc.loader.getRes(t)}),e.exec(o))}):e.exec(o)},t.prototype.loadPrefabObj=function(t,e){var o=cc.loader.getRes(t,cc.Prefab);if(o){var n=cc.instantiate(o);e.exec(n)}else cc.loader.loadRes(t,cc.Prefab,function(o,n){if(o)cc.warn("loadPrefabObj error",t,o);else{var i=cc.instantiate(n);e.exec(i)}})},t.prototype.loadPrefabObjArray=function(t,e){var o={},n=[];t.forEach(function(t){var e=cc.loader.getRes(t,cc.Prefab);e?o[t]=cc.instantiate(e):n.push(t)}),0!=n.length?cc.loader.loadResArray(n,cc.Prefab,function(t){t?cc.warn("loadPrefabObjArray error",n):(n.forEach(function(t){o[t]=cc.instantiate(cc.loader.getRes(t,cc.Prefab))}),e.exec(o))}):e.exec(o)},t.prototype.loadPrefabDir=function(t,e){var o={};cc.loader.loadResDir(t,cc.Prefab,function(n,i,r){n?cc.warn("loadPrefabObjDir error",t):(r.forEach(function(t){o[t]=cc.loader.getRes(t,cc.Prefab)}),e.exec(o))})},t.prototype.loadPrefabObjDir=function(t,e){var o={};cc.loader.loadResDir(t,cc.Prefab,function(n,i,r){n?cc.warn("loadPrefabObjDir error",t):(r.forEach(function(t){o[t]=cc.instantiate(cc.loader.getRes(t,cc.Prefab))}),e.exec(o))})},t.prototype.release=function(t){t instanceof cc.Node?t.destroy():cc.loader.release(t)},t}();o.loader_mgr=n,cc._RF.pop()},{}],pool_mgr:[function(t,e,o){"use strict";cc._RF.push(e,"29eb514/fREDJnvpZLCUcBZ","pool_mgr"),Object.defineProperty(o,"__esModule",{value:!0}),o.pool_mgr=void 0;var n=t("../loader/loader_mgr"),i=t("./ui_pool"),r=function(){function t(){this.ui_pool=new i.ui_pool}return t.get_inst=function(){return this._inst||(this._inst=new t),this._inst},t.prototype.get_ui=function(t,e){var o=this.ui_pool.get(t);o?e.exec(o):n.loader_mgr.get_inst().loadPrefabObj(t,e)},t.prototype.put_ui=function(t,e){e?this.ui_pool.put(t,e):cc.warn("pool_mgr:put_ui, invalid node")},t.prototype.clear_atpath=function(t){this.ui_pool.clear_atpath(t)},t.prototype.clear=function(){this.ui_pool.clear()},t.prototype.dump=function(){this.ui_pool.dump()},t}();o.pool_mgr=r,cc._RF.pop()},{"../loader/loader_mgr":"loader_mgr","./ui_pool":"ui_pool"}],pop_mgr:[function(t,e,o){"use strict";cc._RF.push(e,"424697+0GpMebIfgAZGNA0h","pop_mgr"),Object.defineProperty(o,"__esModule",{value:!0}),o.UI_TRANSITION_TYPE=o.UI_CONFIG=o.pop_mgr=void 0;var n,i=t("../pool/pool_mgr"),r=t("../util"),a=t("./pop_ui_base"),c=t("../timer/timer_mgr"),s=t("../util"),l=t("../tween/Tween"),u=function(){function t(){this.ui_cache={},this.ui_stack=new Array}return t.get_inst=function(){return this.inst||(this.inst=new t),this.inst},t.prototype.get_ui=function(t){var e=this.ui_cache[t];return e||(this.ui_cache[t]=e={node:null,is_show:!1}),e},t.prototype.clear=function(){for(var t in this.ui_cache)this.hide(t);this.ui_cache={},this.ui_stack.length=0},t.prototype.peek=function(){return this.ui_stack[this.ui_stack.length-1]},t.prototype.set_handlers=function(t,e){this.ui_show_handler=t,this.ui_hide_handler=e},t.prototype.is_show=function(t){return null!=this.ui_cache[t]},t.prototype.show=function(t,e){for(var o=this,n=[],l=2;l<arguments.length;l++)n[l-2]=arguments[l];var u=this.get_ui(t);u.is_show||(u.is_show=!0,i.pool_mgr.get_inst().get_ui(t,r.gen_handler(function(r){u.is_show?(u.node=r,o.applyTransitionEffect(r,e),cc.director.getScene().getChildByName("Canvas").getChildByName("mid_layer").addChild(r),c.TimerMgr.getInst().once(0,s.gen_handler(function(){if(u.is_show){var e=r.getComponent(a.POP_UI_BASE);e.ui_name=t,e.__show__.apply(e,n),o.ui_stack.push(t),o.ui_show_handler&&o.ui_show_handler.exec()}}))):i.pool_mgr.get_inst().put_ui(t,r)},this)))},t.prototype.hide=function(t){var e=this.ui_cache[t];if(e&&(this.ui_cache[t]=null,e.is_show=!1,e.node)){i.pool_mgr.get_inst().put_ui(t,e.node),e.node.getComponent(a.POP_UI_BASE).__hide__();var o=this.ui_stack.lastIndexOf(t);-1!=o&&this.ui_stack.splice(o,1),this.ui_hide_handler&&this.ui_hide_handler.exec()}},t.prototype.applyTransitionEffect=function(t,e){if(!e||e.transType!=n.None)switch((e=e||{transType:n.FadeIn,duration:500}).transType){case n.FadeIn:l.Tween.removeTweens(t),t.opacity=0,l.Tween.get(t).to({opacity:255},e.duration)}},t}();o.pop_mgr=u,o.UI_CONFIG={overlay_bg:"prefab/panels/panel_overlay_bg"},function(t){t[t.None=1]="None",t[t.FadeIn=2]="FadeIn",t[t.DropDown=3]="DropDown",t[t.PopUp=4]="PopUp",t[t.LeftIn=5]="LeftIn",t[t.RightIn=6]="RightIn"}(n=o.UI_TRANSITION_TYPE||(o.UI_TRANSITION_TYPE={})),cc._RF.pop()},{"../pool/pool_mgr":"pool_mgr","../timer/timer_mgr":"timer_mgr","../tween/Tween":"Tween","../util":"util","./pop_ui_base":"pop_ui_base"}],pop_ui_base:[function(t,e,o){"use strict";cc._RF.push(e,"e2e68FLOYBOaqRk0bNgNIyc","pop_ui_base");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0}),o.POP_UI_BASE=void 0;var a=t("./pop_mgr"),c=t("../pool/pool_mgr"),s=t("../util"),l=t("../../common/audio/AudioPlayer"),u=cc._decorator,p=u.ccclass,h=u.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.btn_close=null,e}return i(e,t),Object.defineProperty(e.prototype,"ui_name",{set:function(t){this._ui_name=t},enumerable:!1,configurable:!0}),e.prototype.__show__=function(){for(var t=this,e=[],o=0;o<arguments.length;o++)e[o]=arguments[o];this.btn_close&&this.btn_close.node.on(cc.Node.EventType.TOUCH_END,this.onCloseBtnTouch,this),this.is_show=!0,this.on_show.apply(this,e);var n=this.node.getChildByName("panel_overlay_bg");n||c.pool_mgr.get_inst().get_ui(a.UI_CONFIG.overlay_bg,s.gen_handler(function(e){t.is_show&&!t.node.getChildByName("panel_overlay_bg")?(e.name="panel_overlay_bg",t.node.addChild(e),e.setSiblingIndex(0)):c.pool_mgr.get_inst().put_ui(a.UI_CONFIG.overlay_bg,e)},this))},e.prototype.__hide__=function(){cc.log("hide",this._ui_name),this.btn_close&&this.btn_close.node.off(cc.Node.EventType.TOUCH_END,this.onCloseBtnTouch,this),this.is_show=!1,this.on_hide()},e.prototype.on_show=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]},e.prototype.on_hide=function(){},e.prototype.hide=function(){a.pop_mgr.get_inst().hide(this._ui_name)},e.prototype.onCloseBtnTouch=function(){this.hide(),l.AudioPlayer.ins().play_sound(l.AUDIO_CONFIG.Audio_Btn)},r([h(cc.Button)],e.prototype,"btn_close",void 0),r([p],e)}(cc.Component);o.POP_UI_BASE=d,cc._RF.pop()},{"../../common/audio/AudioPlayer":"AudioPlayer","../pool/pool_mgr":"pool_mgr","../util":"util","./pop_mgr":"pop_mgr"}],timer_mgr:[function(t,e,o){"use strict";cc._RF.push(e,"55db98KfNxEboJhHMMpseOV","timer_mgr"),Object.defineProperty(o,"__esModule",{value:!0}),o.TimerMgr=void 0;var n=t("../linklist"),i=function(){function t(){this.key=0,this.pool=[],this.iterList=new n.LinkList,this.pendingList=new n.LinkList}return t.getInst=function(){return this.inst||(this.inst=new t),this.inst},t.prototype.add=function(t,e,o,n,i){void 0===i&&(i=!1);var r=this.pool.pop();return r?(r.interval=t,r.delay=e,r.repeat=o,r.elapsed=0,r.times=0,r.is_updater=i,r.cb=n):r={interval:t,delay:e,repeat:o,elapsed:0,times:0,is_updater:i,cb:n},this.pendingList.append(++this.key,r)},t.prototype.remove=function(t){this.removeIter(t)||this.removePending(t)},t.prototype.removeIter=function(t){var e=this.iterList.remove(t);return!!e&&(this.pool.push(e.data),!0)},t.prototype.removePending=function(t){var e=this.pendingList.remove(t);return!!e&&(this.pool.push(e.data),!0)},t.prototype.loop=function(t,e){return this.add(t,0,0,e)},t.prototype.loopTimes=function(t,e,o){return this.add(t,0,e,o)},t.prototype.frameLoop=function(t){return this.add(1/24,0,0,t)},t.prototype.delayLoop=function(t,e,o){return this.add(t,e,0,o)},t.prototype.once=function(t,e){return this.add(0,t,1,e)},t.prototype.add_updater=function(t){return this.add(0,0,0,t,!0)},t.prototype.update=function(t){for(var e=this.iterList.head;e;)if(e.data.is_updater){var o=e.next;e.data.cb.exec(t),e=o}else 0!=e.data.repeat&&e.data.times>=e.data.repeat?(o=e.next,this.removeIter(e.key),e=o):e.data.elapsed>=e.data.delay+e.data.interval?(o=e.next,e.data.times++,e.data.elapsed=e.data.delay,e.data.cb.exec(),e=o):(e.data.elapsed+=t,e=e.next);for(e=this.pendingList.head;e;){var n=e.key,i=e.data;e=e.next,this.pendingList.remove(n),this.iterList.append(n,i)}},t}();o.TimerMgr=i,cc._RF.pop()},{"../linklist":"linklist"}],ui_pool:[function(t,e,o){"use strict";cc._RF.push(e,"0a950yUsOZNy5HTWZ9gz1hi","ui_pool"),Object.defineProperty(o,"__esModule",{value:!0}),o.ui_pool=void 0;var n=function(){function t(){this.max_size=2,this.cache={},this.path2time={},this.size=0}return t.prototype.get=function(t){var e=this.cache[t];return e&&e.length>0?(this.size--,e.pop()):null},t.prototype.put=function(t,e){if(this.size>=this.max_size){var o=void 0,n=cc.sys.now();for(var i in this.cache)this.cache[i].length>0&&this.path2time[i]<n&&(n=this.path2time[i],o=i);o&&""!=o&&(this.cache[o].pop().destroy(),this.size--)}var r=this.cache[t];r||(this.cache[t]=r=[]),e.removeFromParent(!1),r.push(e),this.size++,this.path2time[t]=cc.sys.now()},t.prototype.clear_atpath=function(t){var e=this.cache[t];if(e&&!(e.length<=0))for(;e.length>0;)e.pop().destroy(),this.size--},t.prototype.clear=function(){for(var t in this.cache)this.clear_atpath(t);this.cache={},this.path2time={},0!=this.size&&cc.warn("size should be 0, but now is",this.size)},t.prototype.dump=function(){var t="********ui_pool dump********";for(var e in this.cache)t+="\n"+e+"\n",this.cache[e].forEach(function(e){t+=e.name+","});cc.log(t)},t}();o.ui_pool=n,cc._RF.pop()},{}],use_reversed_rotateTo:[function(t,e){"use strict";cc._RF.push(e,"19d742HvqdAi5IlM5OGZd4L","use_reversed_rotateTo"),cc.RotateTo._reverse=!0,cc._RF.pop()},{}],util:[function(t,e,o){"use strict";cc._RF.push(e,"5e6fdXDEbdM/owIk62/j/0P","util");var n=this&&this.__spreadArrays||function(){for(var t=0,e=0,o=arguments.length;e<o;e++)t+=arguments[e].length;var n=Array(t),i=0;for(e=0;e<o;e++)for(var r=arguments[e],a=0,c=r.length;a<c;a++,i++)n[i]=r[a];return n};Object.defineProperty(o,"__esModule",{value:!0}),o.destroyBreathAction=o.createBreathAction=o.extend=o.strfmt=o.load_external_img=o.load_plist_img=o.load_img=o.gen_handler=o.handler=void 0;var i=t("../common/loader/loader_mgr"),r=[],a=function(){function t(){}return t.prototype.init=function(t,e){void 0===e&&(e=null);for(var o=[],n=2;n<arguments.length;n++)o[n-2]=arguments[n];this.cb=t,this.host=e,this.args=o},t.prototype.exec=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.cb.apply(this.host,this.args.concat(t))},t}();function c(t,e){void 0===e&&(e=null);for(var o=[],i=2;i<arguments.length;i++)o[i-2]=arguments[i];var c=r.length<0?r.pop():new a;return c.init.apply(c,n([t,e],o)),c}o.handler=a,o.gen_handler=c,o.load_img=function(t,e){i.loader_mgr.get_inst().loadAsset(e,c(function(e){t.spriteFrame=e}),cc.SpriteFrame)},o.load_plist_img=function(t,e,o){i.loader_mgr.get_inst().loadAsset(e,c(function(n){var i=n.getSpriteFrame(o);i?t.spriteFrame=i:cc.warn("path error ("+e+" "+o+")")}),cc.SpriteAtlas)};var s={};o.load_external_img=function(t,e,o){s[e]?t.spriteFrame=s[e]:(t.node.active=!1,i.loader_mgr.get_inst().loadExternalAsset(e,c(function(o){s[e]=new cc.SpriteFrame(o),t.node&&(t.node.active=!0,t.spriteFrame=s[e])}),o))},o.strfmt=function(t){for(var e=[],o=1;o<arguments.length;o++)e[o-1]=arguments[o];return t.replace(/\{(\d+)\}/g,function(t,o){return e[o]||t})},o.extend=function(t){for(var e=[],o=1;o<arguments.length;o++)e[o-1]=arguments[o];for(var n=0;n<e.length;n+=1){var i=e[n];for(var r in i)i.hasOwnProperty(r)&&(t[r]=i[r])}return t},o.createBreathAction=function(t){var e=cc.repeatForever(cc.sequence(cc.scaleTo(.6,1.1),cc.scaleTo(.6,.9)));t.runAction(e)},o.destroyBreathAction=function(t){t.stopAllActions()},cc._RF.pop()},{"../common/loader/loader_mgr":"loader_mgr"}]},{},["use_reversed_rotateTo","AudioPlayer","SingletonClass","EventDispatch","linklist","loader_mgr","LocalStorage","pool_mgr","ui_pool","RandomUtil","timer_mgr","Tween","pop_mgr","pop_ui_base","util","GameConst","GameView","MainView","Over","PackItem","PackView","StoreItem","StorePay","StoreView","Common","CommonLabelScroll","BallItem","BrickItem","GameModel","State"]);