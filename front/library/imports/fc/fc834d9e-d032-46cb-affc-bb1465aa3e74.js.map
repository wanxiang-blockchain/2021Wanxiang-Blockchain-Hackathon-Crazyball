{"version":3,"sources":["assets/src/game/model/State.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import SingletonClass from '../../common/base/SingletonClass';\nexport default class State extends SingletonClass {\n  static ins() {\n    return super.ins() as State;\n  }\n  public imageList = [\n    {\n      type: 6,\n      url: 'images/a1',\n      title: '清一行',\n      price: '10',\n      payCount: 0,\n      payList: [],\n      // 冷却时间\n      time: 0.3,\n      maxCount: 0,\n      sort: -1\n    },\n    {\n      type: 1,\n      url: 'images/a2',\n      title: '冻全屏',\n      price: '10',\n      payCount: 0,\n      payList: [],\n      time: 10,\n      maxCount: 0,\n      sort: -1\n    },\n    {\n      type: 2,\n      url: 'images/a3',\n      title: '两倍速',\n      price: '10',\n      payCount: 0,\n      payList: [],\n      time: 10,\n      maxCount: 0,\n      sort: -1\n    },\n    {\n      type: 3,\n      url: 'images/a4',\n      title: '三倍速',\n      price: '10',\n      payCount: 0,\n      payList: [],\n      time: 10,\n      maxCount: 0,\n      sort: -1\n    },\n    {\n      type: 4,\n      url: 'images/a5',\n      title: '五倍速',\n      price: '10',\n      payCount: 0,\n      payList: [],\n      time: 10,\n      maxCount: 0,\n      sort: -1\n    },\n    {\n      type: 5,\n      url: 'images/a6',\n      title: '清全屏',\n      price: '10',\n      payCount: 0,\n      payList: [],\n      time: 1,\n      maxCount: 0,\n      sort: -1\n    },\n    {\n      type: 7,\n      url: 'images/a7',\n      title: '复活',\n      price: '10',\n      payCount: 0,\n      payList: [],\n      time: 0,\n      maxCount: 0,\n      sort: -1\n    }\n  ];\n\n  public resetImageList() {\n    this.imageList = [\n      {\n        type: 6,\n        url: 'images/a1',\n        title: '清一行',\n        price: '10',\n        payCount: 0,\n        payList: [],\n        // 冷却时间\n        time: 0.3,\n        maxCount: 0,\n        sort: -1\n      },\n      {\n        type: 1,\n        url: 'images/a2',\n        title: '冻全屏',\n        price: '10',\n        payCount: 0,\n        payList: [],\n        time: 10,\n        maxCount: 0,\n        sort: -1\n      },\n      {\n        type: 2,\n        url: 'images/a3',\n        title: '两倍速',\n        price: '10',\n        payCount: 0,\n        payList: [],\n        time: 10,\n        maxCount: 0,\n        sort: -1\n      },\n      {\n        type: 3,\n        url: 'images/a4',\n        title: '三倍速',\n        price: '10',\n        payCount: 0,\n        payList: [],\n        time: 10,\n        maxCount: 0,\n        sort: -1\n      },\n      {\n        type: 4,\n        url: 'images/a5',\n        title: '五倍速',\n        price: '10',\n        payCount: 0,\n        payList: [],\n        time: 10,\n        maxCount: 0,\n        sort: -1\n      },\n      {\n        type: 5,\n        url: 'images/a6',\n        title: '清全屏',\n        price: '10',\n        payCount: 0,\n        payList: [],\n        time: 1,\n        maxCount: 0,\n        sort: -1\n      },\n      {\n        type: 7,\n        url: 'images/a7',\n        title: '复活',\n        price: '10',\n        payCount: 0,\n        payList: [],\n        time: 0,\n        maxCount: 0,\n        sort: -1\n      }\n    ];\n  }\n\n  public async getList() {\n    let result = await State.ins().mainNear.contract.nft_tokens_for_owner({\n      account_id: State.ins().mainNear.ownerKey,\n      from_index: '0',\n      limit: 100000\n    });\n    State.ins().resetImageList();\n    if (State.ins().isLogin && localStorage.getItem('imageList')) {\n      let localStorageImageList = JSON.parse(localStorage.getItem('imageList'));\n      localStorageImageList.forEach((item, index) => {\n        State.ins().imageList[index].sort = item.sort;\n      });\n    }\n    let typeProcessIndex = (res) => {\n      let index = res;\n      switch(res) {\n        case 7:\n          index = 6;\n          break;\n        case 6:\n          index = 0;\n          break;\n      }\n      return index;\n    }\n    result.forEach((item, index) => {\n      let arr = item.token_id.split(':');\n      let targetIndex = typeProcessIndex(Number(arr[0]));\n      State.ins().imageList[targetIndex].payCount++;\n      State.ins().imageList[targetIndex].payList.push(item);\n    });\n    localStorage.setItem('imageList', JSON.stringify(State.ins().imageList));\n  }\n\n  public isLogin = false;\n  public isPay = false;\n  public mianNearConfig = {\n    networkId: 'testnet',\n    contractName: 'dev-1632965307540-55511993444317',\n    // contractName: 'dev-1632724418776-68219858133201',\n    nodeUrl: 'https://rpc.testnet.near.org',\n    // nodeUrl: 'https://public-rpc.blockpi.io/http/near-testnet',\n    walletUrl: 'https://wallet.testnet.near.org',\n    helperUrl: 'https://helper.testnet.near.org'\n    // explorerUrl: \"https://explorer.testnet.near.org\",\n  };\n  public mainNear: any = {\n    near: {},\n    walletAccount: {},\n    contract: {},\n    ownerKey: '',\n    poolBalance: 0,\n    maxScore: 0,\n    balance: 0\n  };\n  public storeNearConfig = {\n    ...this.mianNearConfig,\n    contractName: 'market.' + this.mianNearConfig.contractName,\n  };\n  public storeNear: any = {\n    near: {},\n    walletAccount: {},\n    contract: {},\n    ownerKey: '',\n    poolBalance: 0,\n    maxScore: 0,\n    balance: 0\n  };\n  public storePayBox;\n  public storePayIndex;\n  public storePayObj;\n  public initScene;\n  public init() {}\n}\n"]}