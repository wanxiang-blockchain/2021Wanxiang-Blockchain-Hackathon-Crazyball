{"version":3,"sources":["assets/src/game/MainView.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import { formatPrice } from './common/Common';\nimport State from './model/State';\n\nconst { WalletAccount, keyStores, connect, Contract } = window.nearApi;\n\nconst { ccclass, property } = cc._decorator;\n@ccclass\nexport default class MainView extends cc.Component {\n  @property(cc.Label)\n  maxScore: cc.Label = null;\n  @property(cc.Node)\n  ball: cc.Node = null;\n  @property(cc.Label)\n  awardTotal: cc.Label = null;\n  @property(cc.Label)\n  userName: cc.Label = null;\n  @property(cc.Label)\n  myMoney: cc.Label = null;\n  @property(cc.Node)\n  startButton: cc.Node = null;\n  @property(cc.Label)\n  startTitle: cc.Label = null;\n  @property(cc.Node)\n  startPrice: cc.Node = null;\n  @property(cc.Node)\n  reloginButton: cc.Node = null;\n  @property(cc.Node)\n  packBox: cc.Node = null;\n  @property(cc.Node)\n  pack: cc.Node = null;\n  @property(cc.Node)\n  storeBox: cc.Node = null;\n  @property(cc.Node)\n  store: cc.Node = null;\n  @property([cc.Node])\n  loadingBox: cc.Node = null;\n  @property([cc.Node])\n  loading: cc.Node = null;\n\n  async onLoad() {\n    this.startButton.on('touchstart', this.onStartButton, this);\n    this.reloginButton.on('touchstart', this.onRelogin, this);\n    this.pack.on('touchstart', this.onPack, this);\n    this.store.on('touchstart', this.onStore, this);\n\n    let anim = this.ball.getComponent(cc.Animation);\n    let animState = anim.play();\n    animState.wrapMode = cc.WrapMode.Loop;\n    animState.repeatCount = Infinity;\n\n    this.maxScore.schedule(() => {\n      this.initNear();\n    }, 5);\n    await this.initNear();\n    this.initMarket();\n    await State.ins().getList();\n  }\n\n  update() {\n    this.maxScore.string = formatPrice(State.ins().mainNear.maxScore, 0, false, ',');\n    this.awardTotal.string = formatPrice(State.ins().mainNear.poolBalance, 4) + ' Near';\n    this.myMoney.string = formatPrice(State.ins().mainNear.balance) + ' Near';\n    if (State.ins().isLogin) {\n      this.startPrice.active = true;\n      this.startTitle.string = '开始游戏';\n      this.reloginButton.active = true;\n      this.packBox.active = true;\n      this.storeBox.active = true;\n    }\n    if (State.ins().isPay) {\n      this.startTitle.string = '开始游戏';\n      this.startPrice.active = false;\n    }\n  }\n\n  private onPack() {\n    cc.director.loadScene('pack');\n  }\n\n  private onStore() {\n    cc.director.loadScene('store');\n  }\n\n  private toogleLoading(show = false) {\n    if (show) {\n      this.loadingBox.active = true;\n      let anim = this.loading.getComponent(cc.Animation);\n      let animState = anim.play();\n      animState.wrapMode = cc.WrapMode.Loop;\n      animState.repeatCount = Infinity;\n    } else {\n      this.loadingBox.active = false;\n    }\n  }\n\n  private async onStartButton() {\n    if (State.ins().isLogin) {\n      if (State.ins().isPay) {\n        cc.director.loadScene('game');\n      } else {\n        this.pay();\n      }\n    } else {\n      this.goToGetAuth();\n    }\n  }\n\n  private async initNear() {\n    State.ins().mainNear.near = await connect(Object.assign(State.ins().mianNearConfig, { deps: { keyStore: new keyStores.BrowserLocalStorageKeyStore() } }));\n    State.ins().mainNear.walletAccount = new WalletAccount(State.ins().mainNear.near);\n    State.ins().isLogin = State.ins().mainNear.walletAccount.isSignedIn();\n    State.ins().mainNear.ownerKey = State.ins().mainNear.walletAccount.getAccountId();\n    this.userName.string = State.ins().mainNear.ownerKey;\n    if (State.ins().isLogin) {\n      State.ins().mainNear.contract = new Contract(State.ins().mainNear.walletAccount.account(), State.ins().mianNearConfig.contractName, {\n        viewMethods: ['list_score', 'check_sign', 'nft_tokens_for_owner'],\n        changeMethods: ['upload_score', 'sign_up', 'play_game', 'nft_burn', 'nft_transfer', 'nft_approve'],\n        sender: State.ins().mainNear.walletAccount.account()\n      });\n      let results = await State.ins().mainNear.contract.list_score();\n      State.ins().mainNear.poolBalance = results.total_reward / 1000000000000000000000000;\n      if (results.rank && results.rank.length > 0) {\n        State.ins().mainNear.maxScore = results.rank[0].score || 0;\n      }\n      const account = await State.ins().mainNear.near.account(State.ins().mainNear.walletAccount.getAccountId());\n      State.ins().mainNear.balance = (await account.getAccountBalance()).available / 1000000000000000000000000;\n\n      State.ins().isPay = await State.ins().mainNear.contract.check_sign({\n        account_id: State.ins().mainNear.ownerKey\n      });\n\n      if (State.ins().isPay) {\n        let go = localStorage.getItem('initScene');\n        if (go) {\n          localStorage.removeItem('initScene');\n          cc.director.loadScene(go);\n        }\n      } else {\n        localStorage.removeItem('initScene');\n      }\n    } else {\n      localStorage.removeItem('imageList');\n    }\n  }\n\n  private goToGetAuth() {\n\n    State.ins().mainNear.walletAccount.requestSignIn(State.ins().mianNearConfig.contractName, 'demo');\n  }\n\n  private async pay() {\n    this.toogleLoading(true);\n    await State.ins().mainNear.contract.sign_up(\n      {\n        account_id: State.ins().mainNear.ownerKey\n      },\n      300000000000000,\n      window.nearApi.utils.format.parseNearAmount('1')\n    );\n  }\n\n  private onRelogin() {\n    localStorage.removeItem('imageList');\n    State.ins().mainNear.walletAccount.signOut();\n    this.goToGetAuth();\n  }\n\n  private async initMarket() {\n    State.ins().storeNear.near = await connect(Object.assign(State.ins().storeNearConfig, { deps: { keyStore: new keyStores.BrowserLocalStorageKeyStore() } }));\n    State.ins().storeNear.walletAccount = new WalletAccount(State.ins().storeNear.near);\n    State.ins().storeNear.contract = new Contract(State.ins().storeNear.walletAccount.account(), State.ins().storeNearConfig.contractName, {\n      viewMethods: ['get_sales', 'get_sales_by_owner_id'],\n      changeMethods: ['offer'],\n      sender: State.ins().storeNear.walletAccount.account()\n    });\n    State.ins().storeNear.ownerKey = State.ins().storeNear.walletAccount.getAccountId();\n  }\n}\n"]}