{"version":3,"sources":["assets/src/game/PackView.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import State from './model/State';\n\nconst { ccclass, property } = cc._decorator;\n@ccclass\nexport default class PackView extends cc.Component {\n  @property(cc.Node)\n  goBack: cc.Node = null;\n  @property(cc.Prefab)\n  listBox: cc.Prefab = null;\n  @property(cc.ScrollView)\n  scrollView: cc.ScrollView = null;\n  @property(cc.Node)\n  fucList: cc.Node = null;\n  @property(cc.Prefab)\n  fucBox: cc.Prefab = null;\n  @property(cc.Node)\n  emptyBox: cc.Node = null;\n  @property(cc.Node)\n  nav1: cc.Node = null;\n  @property(cc.Node)\n  nav2: cc.Node = null;\n  @property(cc.Node)\n  sellEmptyBox: cc.Node = null;\n  @property(cc.ScrollView)\n  sellScrollView: cc.ScrollView = null;\n  @property(cc.Node)\n  tips: cc.Node = null;\n  @property(cc.Node)\n  longTapBox: cc.Node = null;\n  @property(cc.Node)\n  giveModel: cc.Node = null;\n  @property(cc.Node)\n  sellModel: cc.Node = null;\n  @property(cc.Node)\n  mask: cc.Node = null;\n  @property(cc.Prefab)\n  sellListBox: cc.Prefab = null;\n\n  activeIndex = 1;\n  tapTime = 0;\n\n  async onLoad() {\n    this.goBack.on('touchstart', this.onGoBack, this);\n\n    await State.ins().getList();\n\n    await this.judgeEmpty();\n    this.nav1.on('touchstart', () => this.onNav(1), this);\n    this.nav2.on('touchstart', () => this.onNav(2), this);\n    this.tips.getChildByName('tipsClose').on(\n      'touchstart',\n      () => {\n        this.tips.active = false;\n        localStorage.setItem('packTips', 'false');\n      },\n      this\n    );\n  }\n\n  private async judgeEmpty() {\n    this.scrollView.content.active = false;\n    this.emptyBox.active = false;\n    this.sellScrollView.content.active = false;\n    this.sellEmptyBox.active = false;\n    this.fucList.active = false;\n    this.tips.active = false;\n\n    if (this.activeIndex === 1) {\n      await this.renderScrollView();\n      if (this.scrollView.content.children.length > 0) {\n        this.scrollView.content.active = true;\n        await this.renderFucList();\n        this.tips.active = localStorage.getItem('packTips') !== 'false';\n        this.fucList.active = true;\n      } else {\n        this.emptyBox.active = true;\n        this.emptyBox.getChildByName('goStore').on(\n          'touchstart',\n          () => {\n            cc.director.loadScene('store');\n          },\n          this\n        );\n      }\n    } else {\n      await this.renderSellScrollView();\n      if (this.sellScrollView.content.children.length > 0) {\n        this.sellScrollView.content.active = true;\n      } else {\n        this.sellEmptyBox.active = true;\n      }\n    }\n  }\n\n  private onNav(activeIndex) {\n    this.activeIndex = activeIndex;\n    let label = this[`nav${activeIndex}`].getChildByName('navLabel');\n    label.opacity = 255 * 0.8;\n    let navBg = this[`nav${activeIndex}`].getChildByName('navActive');\n    navBg.active = true;\n\n    let nextActive = 3 - activeIndex;\n    let nextLabel = this[`nav${nextActive}`].getChildByName('navLabel');\n    nextLabel.opacity = 255 * 0.6;\n    let nextNavBg = this[`nav${nextActive}`].getChildByName('navActive');\n    nextNavBg.active = false;\n    this.judgeEmpty();\n  }\n\n  moveIcon = null;\n  moveIndex = -1;\n  moveCancel = 0;\n  moveTargetIndex = -1;\n\n  private renderScrollView() {\n    let content = this.scrollView.content;\n    content.removeAllChildren();\n    State.ins().imageList.forEach((item, index) => {\n      if (item.payCount === 0) return;\n      if (item.sort !== -1) return;\n      let listBox = cc.instantiate(this.listBox);\n      content.addChild(listBox);\n      listBox.getComponent('PackItem').initBox(item);\n      listBox.on(\n        'touchstart',\n        (event) => {\n          this.longTapBox.active = false;\n          this.scheduleOnce(() => {\n            this.longTap(event, listBox, index);\n          }, 1);\n          if (item.type === 7) return;\n          this.ontouchstart(event, listBox, index);\n        },\n        this,\n        true\n      );\n      if (item.type === 7) return;\n      listBox.on(\n        'touchmove',\n        (e) => {\n          this.unscheduleAllCallbacks();\n          this.onTouchmove(e);\n        },\n        this,\n        true\n      );\n      listBox.on(\n        'touchcancel',\n        () => {\n          this.unscheduleAllCallbacks();\n          this.onTouchcancel(1);\n        },\n        this,\n        true\n      );\n      let scene = cc.director.getScene();\n      scene.getChildByName('Canvas').on(\n        'touchend',\n        () => {\n          this.unscheduleAllCallbacks();\n          this.removeMoveBox();\n        },\n        this,\n        true\n      );\n    });\n  }\n\n  private longTap(event, target, index) {\n    let eventX = event.target.x;\n    let eventY = event.target.y;\n    let eventWidth = event.target.width;\n    let eventHeight = event.target.height;\n    let longTapBoxBounding = this.longTapBox.getBoundingBox();\n    let width = longTapBoxBounding.width;\n    let height = longTapBoxBounding.height;\n    let xProcess = eventX + width / 2 - eventWidth / 2;\n    let yProcess = eventY + 1051 / 2 - height / 2 - eventHeight / 2;\n    let tips = this.longTapBox.getChildByName('tips');\n    tips.setPosition(-90, 96.104);\n    if (xProcess > 300) {\n      xProcess = xProcess - width + eventWidth;\n      tips.setPosition(90, 96.104);\n    }\n    this.longTapBox.setPosition(xProcess, yProcess);\n    this.longTapBox.active = true;\n    this.longTapBox.getChildByName('give').on(\n      'touchstart',\n      () => {\n        this.longTapBox.active = false;\n        this.showGiveModel(target, index);\n      },\n      this\n    );\n    this.longTapBox.getChildByName('sell').once(\n      'touchstart',\n      () => {\n        this.longTapBox.active = false;\n        this.showSellModel(target, index);\n      },\n      this\n    );\n  }\n\n  private showGiveModel(target, index) {\n    this.giveModel.getChildByName('icon').getComponent(cc.Sprite).spriteFrame = target.getChildByName('icon').getComponent(cc.Sprite).spriteFrame;\n    this.giveModel.getChildByName('iconTitleBox').getChildByName('iconTitle').getComponent(cc.Label).string = State.ins().imageList[index].title;\n    this.giveModel.active = true;\n    this.mask.active = true;\n    let input = this.giveModel.getChildByName('inputContext').getChildByName('inputBox').getComponent(cc.EditBox);\n    let inputValue = '';\n    let inputUpdate = (text, editbox, customEventData) => {\n      inputValue = text.string;\n      if (inputValue) {\n        this.giveModel.getChildByName('submit').getChildByName('title').opacity = 255;\n      } else {\n        this.giveModel.getChildByName('submit').getChildByName('title').opacity = 88;\n      }\n    };\n    input.node.on('text-changed', inputUpdate, this);\n    this.giveModel.getChildByName('close').on(\n      'touchstart',\n      () => {\n        this.giveModel.active = false;\n        this.mask.active = false;\n      },\n      this\n    );\n    this.giveModel.getChildByName('submit').on(\n      'touchstart',\n      () => {\n        if (!inputValue) return;\n        State.ins().mainNear.contract.nft_transfer(\n          {\n            receiver_id: inputValue,\n            token_id: State.ins().imageList[index].payList.splice(0, 1)[0].token_id\n          },\n          300000000000000,\n          window.nearApi.utils.format.parseNearAmount('0.000000000000000000000001')\n        );\n      },\n      this\n    );\n  }\n\n  private showSellModel(target, index) {\n    this.sellModel.getChildByName('icon').getComponent(cc.Sprite).spriteFrame = target.getChildByName('icon').getComponent(cc.Sprite).spriteFrame;\n    this.sellModel.getChildByName('iconTitleBox').getChildByName('iconTitle').getComponent(cc.Label).string = State.ins().imageList[index].title;\n    this.sellModel.active = true;\n    this.mask.active = true;\n    this.sellModel.getChildByName('close').on(\n      'touchstart',\n      () => {\n        this.sellModel.active = false;\n        this.mask.active = false;\n      },\n      this\n    );\n    this.sellModel.getChildByName('submit').on(\n      'touchstart',\n      () => {\n        let next = State.ins().imageList[index].payList.splice(0, 1)[0];\n        State.ins().mainNear.contract.nft_approve(\n          {\n            account_id: State.ins().storeNearConfig.contractName,\n            token_id: next.token_id,\n            msg: JSON.stringify({\n              sale_conditions: {\n                near: window.nearApi.utils.format.parseNearAmount('1'),\n                token_type: next.token_id.split(':')[0],\n                is_auction: 'false'\n              }\n            })\n          },\n          300000000000000,\n          window.nearApi.utils.format.parseNearAmount('0.00051')\n        );\n      },\n      this\n    );\n  }\n\n  private async renderSellScrollView() {\n    let content = this.scrollView.content;\n    content.removeAllChildren();\n    let from_index = 0;\n    let limit = 80;\n    let result = [];\n    let awaitResult = async () => {\n      let res = await State.ins().storeNear.contract.get_sales_by_owner_id({\n        account_id: State.ins().storeNear.ownerKey,\n        from_index: from_index.toString(),\n        limit: limit\n      });\n      result = result.concat(res);\n      if (from_index !== 0 && res.length === 0) {\n        return result;\n      } else {\n        from_index += limit;\n        return awaitResult();\n      }\n    };\n    await awaitResult();\n    let typeObj = {};\n    result.forEach((item, index) => {\n      let type = item.token_id.split(':')[0];\n      if (typeObj[type]) {\n        typeObj[type] += 1;\n      } else {\n        typeObj[type] = 1;\n      }\n    });\n    let typeArr = Object.keys(typeObj);\n    State.ins()\n      .imageList.concat()\n      .forEach((item, index) => {\n        if (!typeArr.includes(item.type.toString())) return;\n        let listBox = cc.instantiate(this.sellListBox);\n        content.addChild(listBox);\n      });\n  }\n\n  private async ontouchstart(event, target, index) {\n    this.moveIcon = cc.instantiate(target.getChildByName('icon'));\n    let scene = cc.director.getScene();\n    scene.addChild(this.moveIcon);\n    this.onTouchmove(event);\n    this.moveIndex = index;\n  }\n\n  private onTouchmove(event) {\n    let pos = event.getLocation();\n    let delta = event.getDelta();\n    this.moveIcon.setPosition(pos.x + delta.x, pos.y + delta.y);\n    this.moveTargetIndex = -1;\n    let moveIconBox = this.moveIcon.getBoundingBox();\n    this.fucList.children.forEach((fucBox, index) => {\n      if (cc.Intersection.rectRect(moveIconBox, fucBox.getBoundingBox())) {\n        this.moveTargetIndex = index;\n      }\n    });\n  }\n\n  private async onTouchcancel(step = 1) {\n    this.moveCancel += step;\n\n    if (this.moveTargetIndex !== -1) {\n      this.moveCancel = 0;\n      this.removeMoveBox();\n      State.ins().imageList.forEach((item, index) => {\n        if (item.sort === this.moveTargetIndex) {\n          item.sort = -1;\n        }\n      });\n      State.ins().imageList[this.moveIndex].sort = this.moveTargetIndex;\n      localStorage.setItem('imageList', JSON.stringify(State.ins().imageList));\n      this.renderFucList();\n      this.renderScrollView();\n    } else {\n      if (this.moveCancel === 2) {\n        State.ins().imageList[this.moveIndex].sort = this.moveTargetIndex;\n        localStorage.setItem('imageList', JSON.stringify(State.ins().imageList));\n        this.removeMoveBox();\n      }\n    }\n  }\n\n  private removeMoveBox() {\n    let scene = cc.director.getScene();\n    scene.removeChild(this.moveIcon);\n    this.moveCancel = 0;\n  }\n\n  private async renderFucList() {\n    if (this.fucList) {\n      this.fucList.removeAllChildren();\n    }\n    let fucListLength = 4;\n    new Array(fucListLength).fill(1).map((item, index) => {\n      let fuc = cc.instantiate(this.fucBox);\n      let defaultContent = fuc.getChildByName('default');\n      let fucIndex = defaultContent.getChildByName('index');\n      let fucLabel = fucIndex.getComponent(cc.Label);\n      fucLabel.string = (index + 1).toString();\n      this.fucList.addChild(fuc);\n    });\n    State.ins().imageList.forEach((item, index) => {\n      if (item.sort >= 0 && item.payCount > 0) {\n        let targetBox = this.fucList.children[item.sort];\n        let defaultContent = targetBox.getChildByName('default');\n        let set = targetBox.getChildByName('set');\n        let icon = set.getChildByName('icon');\n        let iconSprite = icon.getComponent(cc.Sprite);\n        let count = set.getChildByName('countBox').getChildByName('count');\n        let countLabel = count.getComponent(cc.Label);\n        countLabel.string = 'x ' + State.ins().imageList[index].payCount;\n        defaultContent.active = false;\n        set.active = true;\n        cc.resources.load(item.url, cc.SpriteFrame, (err, spriteFrame: cc.SpriteFrame) => {\n          iconSprite.spriteFrame = spriteFrame;\n        });\n\n        let listBox = cc.instantiate(this.listBox);\n        listBox.getComponent('PackItem').initBox(item);\n        targetBox.on(\n          'touchstart',\n          (event) => {\n            this.longTapBox.active = false;\n            this.ontouchstart(event, listBox, index);\n          },\n          this,\n          true\n        );\n        targetBox.on('touchmove', this.onTouchmove, this, true);\n        targetBox.on(\n          'touchcancel',\n          () => {\n            this.onTouchcancel(2);\n            if (this.moveTargetIndex === -1) {\n              State.ins().imageList[index].sort = -1;\n              this.renderFucList();\n              this.renderScrollView();\n            }\n          },\n          this,\n          true\n        );\n        targetBox.on('touchend', this.removeMoveBox, this, true);\n      }\n    });\n  }\n\n  private onGoBack() {\n    cc.director.loadScene('main');\n  }\n}\n"]}